import{N as e,M as t,Y as n}from"./vendor.19c9fb29.js";import{_ as r,s as o,g as i,r as a,b as s,a as c,d as u}from"./setPrototypeOf.b2bbba2d.js";import{e as l}from"./events.b35c4505.js";var d,p={},f={exports:{}};(d=f).exports=function(e){return e&&e.__esModule?e:{default:e}},d.exports.default=d.exports,d.exports.__esModule=!0;var E={},_={exports:{}};!function(e){var t=r.exports.default;function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}e.exports=function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!==t(e)&&"function"!=typeof e)return{default:e};var o=n(r);if(o&&o.has(e))return o.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var c=a?Object.getOwnPropertyDescriptor(e,s):null;c&&(c.get||c.set)?Object.defineProperty(i,s,c):i[s]=e[s]}return i.default=e,o&&o.set(e,i),i},e.exports.default=e.exports,e.exports.__esModule=!0}(_);var h={__esModule:!0};h.FIAT_RATES_UPDATE=h.NOTIFICATION=h.BLOCK=h.CONNECT=h.ERROR=void 0;h.ERROR="blockchain-error";h.CONNECT="blockchain-connect";h.BLOCK="blockchain-block";h.NOTIFICATION="blockchain-notification";h.FIAT_RATES_UPDATE="fiat-rates-update";var m={__esModule:!0};m.UNREADABLE=m.WAIT_FOR_SELECTION=m.WORD=m.PASSPHRASE_ON_DEVICE=m.PASSPHRASE=m.PIN=m.BUTTON=m.LOADING=m.USED_ELSEWHERE=m.RELEASED=m.ACQUIRED=m.RELEASE=m.ACQUIRE=m.CHANGED=m.DISCONNECT=m.CONNECT_UNACQUIRED=m.CONNECT=void 0;m.CONNECT="device-connect";m.CONNECT_UNACQUIRED="device-connect_unacquired";m.DISCONNECT="device-disconnect";m.CHANGED="device-changed";m.ACQUIRE="device-acquire";m.RELEASE="device-release";m.ACQUIRED="device-acquired";m.RELEASED="device-released";m.USED_ELSEWHERE="device-used_elsewhere";m.LOADING="device-loading";m.BUTTON="button";m.PIN="pin";m.PASSPHRASE="passphrase";m.PASSPHRASE_ON_DEVICE="passphrase_on_device";m.WORD="word";m.WAIT_FOR_SELECTION="device-wait_for_selection";m.UNREADABLE="unreadable-device";var y={},b={exports:{}};!function(e){var t=o.exports;e.exports=function(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,t(e,n)},e.exports.default=e.exports,e.exports.__esModule=!0}(b);var v={exports:{}},S={exports:{}};!function(e){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},e.exports.default=e.exports,e.exports.__esModule=!0}(S);var T={exports:{}},O={exports:{}};!function(e){e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.default=e.exports,e.exports.__esModule=!0}(O),function(e){var t=o.exports,n=O.exports;function r(o,i,a){return n()?(e.exports=r=Reflect.construct,e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=r=function(e,n,r){var o=[null];o.push.apply(o,n);var i=new(Function.bind.apply(e,o));return r&&t(i,r.prototype),i},e.exports.default=e.exports,e.exports.__esModule=!0),r.apply(null,arguments)}e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0}(T),function(e){var t=i.exports,n=o.exports,r=S.exports,a=T.exports;function s(o){var i="function"==typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!r(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==i){if(i.has(e))return i.get(e);i.set(e,o)}function o(){return a(e,arguments,t(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),n(o,e)},e.exports.default=e.exports,e.exports.__esModule=!0,s(o)}e.exports=s,e.exports.default=e.exports,e.exports.__esModule=!0}(v);var g=f.exports;y.__esModule=!0,y.WEBUSB_ERROR_MESSAGE=y.INVALID_PIN_ERROR_MESSAGE=y.WRONG_PREVIOUS_SESSION_ERROR_MESSAGE=y.TypedError=y.TrezorError=y.ERROR_CODES=void 0;var R=g(b.exports),I=g(v.exports),w={Init_NotInitialized:"TrezorConnect not yet initialized",Init_AlreadyInitialized:"TrezorConnect has been already initialized",Init_IframeBlocked:"Iframe blocked",Init_IframeTimeout:"Iframe timeout",Init_ManifestMissing:"Manifest not set. Read more at https://github.com/trezor/connect/blob/develop/docs/index.md",Popup_ConnectionMissing:"Unable to establish connection with iframe",Transport_Missing:"Transport is missing",Transport_InvalidProtobuf:"",Method_InvalidPackage:"This version of trezor-connect is not suitable to work without browser. Use trezor-connect@extended package instead",Method_InvalidParameter:"",Method_NotAllowed:"Method not allowed for this configuration",Method_PermissionsNotGranted:"Permissions not granted",Method_Cancel:"Cancelled",Method_Interrupted:"Popup closed",Method_UnknownCoin:"Coin not found",Method_AddressNotMatch:"Addresses do not match",Method_FirmwareUpdate_DownloadFailed:"Failed to download firmware binary",Method_CustomMessage_Callback:'Parameter "callback" is not a function',Method_Discovery_BundleException:"",Method_Override:"override",Method_NoResponse:"Call resolved without response",Backend_NotSupported:"BlockchainLink settings not found in coins.json",Backend_WorkerMissing:"",Backend_Disconnected:"Backend disconnected",Backend_Invalid:"Invalid backend",Backend_Error:"",Runtime:"",Device_NotFound:"Device not found",Device_InitializeFailed:"",Device_FwException:"",Device_ModeException:"",Device_Disconnected:"Device disconnected",Device_UsedElsewhere:"Device is used in another window",Device_InvalidState:"Passphrase is incorrect",Device_CallInProgress:"Device call in progress"};y.ERROR_CODES=w;var A=function(e){function t(t,n){var r;return(r=e.call(this,n)||this).code=t,r.message=n,r}return(0,R.default)(t,e),t}((0,I.default)(Error));y.TrezorError=A;y.TypedError=function(e,t){return new A(e,t||w[e])};y.WRONG_PREVIOUS_SESSION_ERROR_MESSAGE="wrong previous session";y.INVALID_PIN_ERROR_MESSAGE="PIN invalid";y.WEBUSB_ERROR_MESSAGE="NetworkError: Unable to claim interface.";var N={__esModule:!0};N.CALL=N.ERROR=N.INIT=N.LOADED=N.BOOTSTRAP=void 0;N.BOOTSTRAP="iframe-bootstrap";N.LOADED="iframe-loaded";N.INIT="iframe-init";N.ERROR="iframe-error";N.CALL="iframe-call";var C={__esModule:!0,TYPES:void 0},x=Object.freeze({bitcoin:"Bitcoin",ethereum:"Ethereum",eos:"Eos",nem:"NEM",stellar:"Stellar",lisk:"Lisk",cardano:"Cardano",ripple:"Ripple",tezos:"Tezors",binance:"Binance"});C.TYPES=x;var P={__esModule:!0};P.CLOSE_WINDOW=P.CANCEL_POPUP_REQUEST=P.CLOSED=P.HANDSHAKE=P.EXTENSION_USB_PERMISSIONS=P.ERROR=P.INIT=P.LOADED=P.BOOTSTRAP=void 0;P.BOOTSTRAP="popup-bootstrap";P.LOADED="popup-loaded";P.INIT="popup-init";P.ERROR="popup-error";P.EXTENSION_USB_PERMISSIONS="open-usb-permissions";P.HANDSHAKE="popup-handshake";P.CLOSED="popup-closed";P.CANCEL_POPUP_REQUEST="ui-cancel-popup-request";P.CLOSE_WINDOW="window.close";var U={__esModule:!0};U.START_PENDING=U.DISABLE_WEBUSB=U.REQUEST=U.STREAM=U.UPDATE=U.ERROR=U.START=void 0;U.START="transport-start";U.ERROR="transport-error";U.UPDATE="transport-update";U.STREAM="transport-stream";U.REQUEST="transport-request_device";U.DISABLE_WEBUSB="transport-disable_webusb";U.START_PENDING="transport-start_pending";var B={__esModule:!0};B.IFRAME_FAILURE=B.ADDRESS_VALIDATION=B.BUNDLE_PROGRESS=B.LOGIN_CHALLENGE_RESPONSE=B.LOGIN_CHALLENGE_REQUEST=B.CUSTOM_MESSAGE_RESPONSE=B.CUSTOM_MESSAGE_REQUEST=B.CHANGE_SETTINGS=B.RECEIVE_WORD=B.RECEIVE_FEE=B.RECEIVE_ACCOUNT=B.CHANGE_ACCOUNT=B.RECEIVE_DEVICE=B.RECEIVE_PASSPHRASE=B.RECEIVE_PIN=B.RECEIVE_CONFIRMATION=B.RECEIVE_PERMISSION=B.REQUEST_WORD=B.REQUEST_BUTTON=B.INSUFFICIENT_FUNDS=B.UPDATE_CUSTOM_FEE=B.SELECT_FEE=B.SELECT_ACCOUNT=B.SELECT_DEVICE=B.SET_OPERATION=B.LOADING=B.CONNECT=B.INVALID_PASSPHRASE_ACTION=B.INVALID_PASSPHRASE=B.REQUEST_PASSPHRASE_ON_DEVICE=B.REQUEST_PASSPHRASE=B.INVALID_PIN=B.REQUEST_PIN=B.REQUEST_CONFIRMATION=B.REQUEST_PERMISSION=B.CLOSE_UI_WINDOW=B.REQUEST_UI_WINDOW=B.DEVICE_NEEDS_BACKUP=B.FIRMWARE_PROGRESS=B.FIRMWARE_NOT_INSTALLED=B.FIRMWARE_NOT_COMPATIBLE=B.FIRMWARE_NOT_SUPPORTED=B.FIRMWARE_OUTDATED=B.FIRMWARE_OLD=B.SEEDLESS=B.INITIALIZE=B.REQUIRE_MODE=B.NOT_IN_BOOTLOADER=B.BOOTLOADER=B.TRANSPORT=void 0;B.TRANSPORT="ui-no_transport";B.BOOTLOADER="ui-device_bootloader_mode";B.NOT_IN_BOOTLOADER="ui-device_not_in_bootloader_mode";B.REQUIRE_MODE="ui-device_require_mode";B.INITIALIZE="ui-device_not_initialized";B.SEEDLESS="ui-device_seedless";B.FIRMWARE_OLD="ui-device_firmware_old";B.FIRMWARE_OUTDATED="ui-device_firmware_outdated";B.FIRMWARE_NOT_SUPPORTED="ui-device_firmware_unsupported";B.FIRMWARE_NOT_COMPATIBLE="ui-device_firmware_not_compatible";B.FIRMWARE_NOT_INSTALLED="ui-device_firmware_not_installed";B.FIRMWARE_PROGRESS="ui-firmware-progress";B.DEVICE_NEEDS_BACKUP="ui-device_needs_backup";B.REQUEST_UI_WINDOW="ui-request_window";B.CLOSE_UI_WINDOW="ui-close_window";B.REQUEST_PERMISSION="ui-request_permission";B.REQUEST_CONFIRMATION="ui-request_confirmation";B.REQUEST_PIN="ui-request_pin";B.INVALID_PIN="ui-invalid_pin";B.REQUEST_PASSPHRASE="ui-request_passphrase";B.REQUEST_PASSPHRASE_ON_DEVICE="ui-request_passphrase_on_device";B.INVALID_PASSPHRASE="ui-invalid_passphrase";B.INVALID_PASSPHRASE_ACTION="ui-invalid_passphrase_action";B.CONNECT="ui-connect";B.LOADING="ui-loading";B.SET_OPERATION="ui-set_operation";B.SELECT_DEVICE="ui-select_device";B.SELECT_ACCOUNT="ui-select_account";B.SELECT_FEE="ui-select_fee";B.UPDATE_CUSTOM_FEE="ui-update_custom_fee";B.INSUFFICIENT_FUNDS="ui-insufficient_funds";B.REQUEST_BUTTON="ui-button";B.REQUEST_WORD="ui-request_word";B.RECEIVE_PERMISSION="ui-receive_permission";B.RECEIVE_CONFIRMATION="ui-receive_confirmation";B.RECEIVE_PIN="ui-receive_pin";B.RECEIVE_PASSPHRASE="ui-receive_passphrase";B.RECEIVE_DEVICE="ui-receive_device";B.CHANGE_ACCOUNT="ui-change_account";B.RECEIVE_ACCOUNT="ui-receive_account";B.RECEIVE_FEE="ui-receive_fee";B.RECEIVE_WORD="ui-receive_word";B.CHANGE_SETTINGS="ui-change_settings";B.CUSTOM_MESSAGE_REQUEST="ui-custom_request";B.CUSTOM_MESSAGE_RESPONSE="ui-custom_response";B.LOGIN_CHALLENGE_REQUEST="ui-login_challenge_request";B.LOGIN_CHALLENGE_RESPONSE="ui-login_challenge_response";B.BUNDLE_PROGRESS="ui-bundle_progress";B.ADDRESS_VALIDATION="ui-address_validation";B.IFRAME_FAILURE="ui-iframe_failure";var M={__esModule:!0};M.POOL_RELAY_TYPE=M.CERTIFICATE_TYPE=M.ADDRESS_TYPE=M.NETWORK_IDS=M.PROTOCOL_MAGICS=void 0;var L=Object.freeze({mainnet:764824073,testnet:42});M.PROTOCOL_MAGICS=L;var D=Object.freeze({mainnet:1,testnet:0});M.NETWORK_IDS=D;var k=Object.freeze({Base:0,Pointer:4,Enterprise:6,Byron:8,Reward:14});M.ADDRESS_TYPE=k;var F=Object.freeze({StakeRegistration:0,StakeDeregistration:1,StakeDelegation:2,StakePoolRegistration:3});M.CERTIFICATE_TYPE=F;var Q=Object.freeze({SingleHostIp:0,SingleHostName:1,MultipleHostName:2});M.POOL_RELAY_TYPE=Q;var j=_.exports;E.__esModule=!0,E.CARDANO=E.UI=E.TRANSPORT=E.POPUP=E.NETWORK=E.IFRAME=E.ERRORS=E.DEVICE=E.BLOCKCHAIN=E.BLOCKCHAIN_EVENT=E.RESPONSE_EVENT=E.TRANSPORT_EVENT=E.DEVICE_EVENT=E.UI_EVENT=E.CORE_EVENT=void 0;var z=j(h);E.BLOCKCHAIN=z;var V=j(m);E.DEVICE=V;var G=j(y);E.ERRORS=G;var W=j(N);E.IFRAME=W;var H=j(C);E.NETWORK=H;var q=j(P);E.POPUP=q;var J=j(U);E.TRANSPORT=J;var K=j(B);E.UI=K;var Y=j(M);E.CARDANO=Y;E.CORE_EVENT="CORE_EVENT";E.UI_EVENT="UI_EVENT";E.DEVICE_EVENT="DEVICE_EVENT";E.TRANSPORT_EVENT="TRANSPORT_EVENT";E.RESPONSE_EVENT="RESPONSE_EVENT";E.BLOCKCHAIN_EVENT="BLOCKCHAIN_EVENT";var Z={},X={},$={__esModule:!0,showPopupRequest:void 0},ee="TrezorConnectInteractionLayer";$.showPopupRequest=function(e,t){if(!document.getElementById(ee)){var n=document.createElement("div");n.id=ee,n.className="trezorconnect-container",n.innerHTML='\n    <div class="trezorconnect-container" id="TrezorConnectInteractionLayer">\n        <div class="trezorconnect-window">\n            <div class="trezorconnect-head">\n                <svg class="trezorconnect-logo" x="0px" y="0px" viewBox="0 0 163.7 41.9" width="78px" height="20px" preserveAspectRatio="xMinYMin meet">\n                    <polygon points="101.1,12.8 118.2,12.8 118.2,17.3 108.9,29.9 118.2,29.9 118.2,35.2 101.1,35.2 101.1,30.7 110.4,18.1 101.1,18.1"/>\n                    <path d="M158.8,26.9c2.1-0.8,4.3-2.9,4.3-6.6c0-4.5-3.1-7.4-7.7-7.4h-10.5v22.3h5.8v-7.5h2.2l4.1,7.5h6.7L158.8,26.9z M154.7,22.5 h-4V18h4c1.5,0,2.5,0.9,2.5,2.2C157.2,21.6,156.2,22.5,154.7,22.5z"/>\n                    <path d="M130.8,12.5c-6.8,0-11.6,4.9-11.6,11.5s4.9,11.5,11.6,11.5s11.7-4.9,11.7-11.5S137.6,12.5,130.8,12.5z M130.8,30.3 c-3.4,0-5.7-2.6-5.7-6.3c0-3.8,2.3-6.3,5.7-6.3c3.4,0,5.8,2.6,5.8,6.3C136.6,27.7,134.2,30.3,130.8,30.3z"/>\n                    <polygon points="82.1,12.8 98.3,12.8 98.3,18 87.9,18 87.9,21.3 98,21.3 98,26.4 87.9,26.4 87.9,30 98.3,30 98.3,35.2 82.1,35.2 "/>\n                    <path d="M24.6,9.7C24.6,4.4,20,0,14.4,0S4.2,4.4,4.2,9.7v3.1H0v22.3h0l14.4,6.7l14.4-6.7h0V12.9h-4.2V9.7z M9.4,9.7 c0-2.5,2.2-4.5,5-4.5s5,2,5,4.5v3.1H9.4V9.7z M23,31.5l-8.6,4l-8.6-4V18.1H23V31.5z"/>\n                    <path d="M79.4,20.3c0-4.5-3.1-7.4-7.7-7.4H61.2v22.3H67v-7.5h2.2l4.1,7.5H80l-4.9-8.3C77.2,26.1,79.4,24,79.4,20.3z M71,22.5h-4V18 h4c1.5,0,2.5,0.9,2.5,2.2C73.5,21.6,72.5,22.5,71,22.5z"/>\n                    <polygon points="40.5,12.8 58.6,12.8 58.6,18.1 52.4,18.1 52.4,35.2 46.6,35.2 46.6,18.1 40.5,18.1 "/>\n                </svg>\n                <div class="trezorconnect-close">\n                    <svg x="0px" y="0px" viewBox="24 24 60 60" width="24px" height="24px" preserveAspectRatio="xMinYMin meet">\n                        <polygon class="st0" points="40,67.9 42.1,70 55,57.1 67.9,70 70,67.9 57.1,55 70,42.1 67.9,40 55,52.9 42.1,40 40,42.1 52.9,55 "/>\n                    </svg>\n                </div>\n            </div>\n            <div class="trezorconnect-body">\n                <h3>Popup was blocked</h3>\n                <p>Please click to “Continue” to open popup manually</p>\n                <button class="trezorconnect-open">Continue</button>\n            </div>\n        </div>\n    </div>\n',document.body&&document.body.appendChild(n),n.getElementsByClassName("trezorconnect-open")[0].onclick=function(){e(),document.body&&document.body.removeChild(n)},n.getElementsByClassName("trezorconnect-close")[0].onclick=function(){t(),document.body&&document.body.removeChild(n)}}};var te={},ne="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==ne&&ne,re="URLSearchParams"in ne,oe="Symbol"in ne&&"iterator"in Symbol,ie="FileReader"in ne&&"Blob"in ne&&function(){try{return new Blob,!0}catch(e){return!1}}(),ae="FormData"in ne,se="ArrayBuffer"in ne;if(se)var ce=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],ue=ArrayBuffer.isView||function(e){return e&&ce.indexOf(Object.prototype.toString.call(e))>-1};function le(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function de(e){return"string"!=typeof e&&(e=String(e)),e}function pe(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return oe&&(t[Symbol.iterator]=function(){return t}),t}function fe(e){this.map={},e instanceof fe?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function Ee(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function _e(e){return new Promise((function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function he(e){var t=new FileReader,n=_e(t);return t.readAsArrayBuffer(e),n}function me(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function ye(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:ie&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:ae&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:re&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():se&&ie&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=me(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):se&&(ArrayBuffer.prototype.isPrototypeOf(e)||ue(e))?this._bodyArrayBuffer=me(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):re&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},ie&&(this.blob=function(){var e=Ee(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=Ee(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(he)}),this.text=function(){var e,t,n,r=Ee(this);if(r)return r;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,n=_e(t),t.readAsText(e),n;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},ae&&(this.formData=function(){return this.text().then(Se)}),this.json=function(){return this.text().then(JSON.parse)},this}fe.prototype.append=function(e,t){e=le(e),t=de(t);var n=this.map[e];this.map[e]=n?n+", "+t:t},fe.prototype.delete=function(e){delete this.map[le(e)]},fe.prototype.get=function(e){return e=le(e),this.has(e)?this.map[e]:null},fe.prototype.has=function(e){return this.map.hasOwnProperty(le(e))},fe.prototype.set=function(e,t){this.map[le(e)]=de(t)},fe.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},fe.prototype.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),pe(e)},fe.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),pe(e)},fe.prototype.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),pe(e)},oe&&(fe.prototype[Symbol.iterator]=fe.prototype.entries);var be=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function ve(e,t){if(!(this instanceof ve))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n,r,o=(t=t||{}).body;if(e instanceof ve){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new fe(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new fe(t.headers)),this.method=(n=t.method||this.method||"GET",r=n.toUpperCase(),be.indexOf(r)>-1?r:n),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(o),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var i=/([?&])_=[^&]*/;if(i.test(this.url))this.url=this.url.replace(i,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function Se(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}})),t}function Te(e,t){if(!(this instanceof Te))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new fe(t.headers),this.url=t.url||"",this._initBody(e)}ve.prototype.clone=function(){return new ve(this,{body:this._bodyInit})},ye.call(ve.prototype),ye.call(Te.prototype),Te.prototype.clone=function(){return new Te(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new fe(this.headers),url:this.url})},Te.error=function(){var e=new Te(null,{status:0,statusText:""});return e.type="error",e};var Oe=[301,302,303,307,308];Te.redirect=function(e,t){if(-1===Oe.indexOf(t))throw new RangeError("Invalid status code");return new Te(null,{status:t,headers:{location:e}})};var ge=ne.DOMException;try{new ge}catch(Kn){(ge=function(e,t){this.message=e,this.name=t;var n=Error(e);this.stack=n.stack}).prototype=Object.create(Error.prototype),ge.prototype.constructor=ge}function Re(e,t){return new Promise((function(n,r){var o=new ve(e,t);if(o.signal&&o.signal.aborted)return r(new ge("Aborted","AbortError"));var i=new XMLHttpRequest;function a(){i.abort()}i.onload=function(){var e,t,r={status:i.status,statusText:i.statusText,headers:(e=i.getAllResponseHeaders()||"",t=new fe,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var n=e.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();t.append(r,o)}})),t)};r.url="responseURL"in i?i.responseURL:r.headers.get("X-Request-URL");var o="response"in i?i.response:i.responseText;setTimeout((function(){n(new Te(o,r))}),0)},i.onerror=function(){setTimeout((function(){r(new TypeError("Network request failed"))}),0)},i.ontimeout=function(){setTimeout((function(){r(new TypeError("Network request failed"))}),0)},i.onabort=function(){setTimeout((function(){r(new ge("Aborted","AbortError"))}),0)},i.open(o.method,function(e){try{return""===e&&ne.location.href?ne.location.href:e}catch(t){return e}}(o.url),!0),"include"===o.credentials?i.withCredentials=!0:"omit"===o.credentials&&(i.withCredentials=!1),"responseType"in i&&(ie?i.responseType="blob":se&&o.headers.get("Content-Type")&&-1!==o.headers.get("Content-Type").indexOf("application/octet-stream")&&(i.responseType="arraybuffer")),!t||"object"!=typeof t.headers||t.headers instanceof fe?o.headers.forEach((function(e,t){i.setRequestHeader(t,e)})):Object.getOwnPropertyNames(t.headers).forEach((function(e){i.setRequestHeader(e,de(t.headers[e]))})),o.signal&&(o.signal.addEventListener("abort",a),i.onreadystatechange=function(){4===i.readyState&&o.signal.removeEventListener("abort",a)}),i.send(void 0===o._bodyInit?null:o._bodyInit)}))}Re.polyfill=!0,ne.fetch||(ne.fetch=Re,ne.Headers=fe,ne.Request=ve,ne.Response=Te);var Ie=f.exports;te.__esModule=!0,te.getOrigin=te.httpRequest=void 0;var we=Ie(a),Ae=Ie(s.exports),Ne=function(){var e=(0,Ae.default)(we.default.mark((function e(t,n){var r,o;return we.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n="text"),e.next=3,fetch(t,{credentials:"same-origin"});case 3:if(!(r=e.sent).ok){e.next=13;break}if("json"!==n){e.next=10;break}return e.next=8,r.text();case 8:return o=e.sent,e.abrupt("return",JSON.parse(o));case 10:if("binary"!==n){e.next=12;break}return e.abrupt("return",r.arrayBuffer());case 12:return e.abrupt("return",r.text());case 13:throw new Error("httpRequest error: "+t+" "+r.statusText);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();te.httpRequest=Ne;te.getOrigin=function(e){if(0===e.indexOf("file://"))return"file://";var t=e.match(/^.+\:\/\/[^\/]+/);return Array.isArray(t)&&t.length>0?t[0]:"unknown"};var Ce={},xe=f.exports;Ce.__esModule=!0,Ce.create=function(e,t){var n,r=function(e){},o=function(e){},i=new Promise(function(){var t=(0,Ue.default)(Pe.default.mark((function t(i,a){return Pe.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=i,o=a,"function"!=typeof e){t.next=11;break}return t.prev=3,t.next=6,e();case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),a(t.t0);case 11:"string"==typeof e&&(n=e);case 12:case"end":return t.stop()}}),t,null,[[3,8]])})));return function(e,n){return t.apply(this,arguments)}}());return{id:n,device:t,resolve:r,reject:o,promise:i}},Ce.createAsync=function(e){var t=function(e){},n=function(e){},r=new Promise((function(e,r){t=e,n=r})),o=function(){var t=(0,Ue.default)(Pe.default.mark((function t(){return Pe.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{resolve:t,reject:n,promise:r,run:function(){return o(),r}}},Ce.resolveTimeoutPromise=function(e,t){return new Promise((function(n){setTimeout((function(){n(t)}),e)}))},Ce.rejectTimeoutPromise=void 0;var Pe=xe(a),Ue=xe(s.exports);Ce.rejectTimeoutPromise=function(e,t){return new Promise((function(n,r){setTimeout((function(){r(t)}),e)}))},function(e){var t=_.exports,n=f.exports;e.__esModule=!0,e.default=void 0;var r=n(a),o=n(s.exports),i=n(c.exports),d=n(b.exports),p=n(u.exports),E=n(l.exports),h=t(P),m=t(N),y=t(B),v=$,S=te,T=Ce,O=function(e){function t(t){var n;return n=e.call(this)||this,(0,p.default)((0,i.default)(n),"requestTimeout",0),(0,p.default)((0,i.default)(n),"closeInterval",0),(0,p.default)((0,i.default)(n),"extensionTabId",0),n.settings=t,n.origin=(0,S.getOrigin)(t.popupSrc),n.handleMessage=n.handleMessage.bind((0,i.default)(n)),n.iframeHandshake=(0,T.create)(m.LOADED),"webextension"===n.settings.env&&(n.handleExtensionConnect=n.handleExtensionConnect.bind((0,i.default)(n)),n.handleExtensionMessage=n.handleExtensionMessage.bind((0,i.default)(n)),chrome.runtime.onConnect.addListener(n.handleExtensionConnect)),window.addEventListener("message",n.handleMessage,!1),n}(0,d.default)(t,e);var n=t.prototype;return n.request=function(e){var t=this;if(void 0===e&&(e=!1),this.locked)this._window&&("webextension"===this.settings.env?chrome.tabs.update(this._window.id,{active:!0}):this._window.focus());else{var n=this.open.bind(this);if(this.locked=!0,this.settings.supportedBrowser){var r=e||"webextension"===this.settings.env?1:850;this.requestTimeout=window.setTimeout((function(){t.requestTimeout=0,n(e)}),r)}else n()}},n.cancel=function(){this.close()},n.unlock=function(){this.locked=!1},n.open=function(e){var t=this,n=this.settings.popupSrc;this.settings.supportedBrowser?(this.popupPromise=(0,T.create)(h.LOADED),this.openWrapper(e?n+"#loading":n),this.closeInterval=window.setInterval((function(){t._window&&("webextension"===t.settings.env?chrome.tabs.get(t._window.id,(function(e){e||(t.close(),t.emit(h.CLOSED))})):t._window.closed&&(t.close(),t.emit(h.CLOSED)))}),500),this.openTimeout=window.setTimeout((function(){t.close(),(0,v.showPopupRequest)(t.open.bind(t),(function(){t.emit(h.CLOSED)}))}),3e3)):this.openWrapper(n+"#unsupported")},n.openWrapper=function(e){var t=this;"webextension"===this.settings.env?chrome.windows.getCurrent(null,(function(n){"normal"!==n.type?chrome.windows.create({url:e},(function(e){chrome.tabs.query({windowId:e.id,active:!0},(function(e){t._window=e[0]}))})):chrome.tabs.query({currentWindow:!0,active:!0},(function(n){t.extensionTabId=n[0].id,chrome.tabs.create({url:e,index:n[0].index+1},(function(e){t._window=e}))}))})):"electron"===this.settings.env?this._window=window.open(e,"modal"):(this._window=window.open("","_blank"),this._window&&(this._window.location.href=e))},n.handleExtensionConnect=function(e){"trezor-connect"===e.name&&(!this._window||this._window&&this._window.id!==e.sender.tab.id?e.disconnect():(window.clearTimeout(this.openTimeout),this.extensionPort=e,this.extensionPort.onMessage.addListener(this.handleExtensionMessage)))},n.handleExtensionMessage=function(e){var t=this;if(this.extensionPort){var n=this.extensionPort,r=e.data;if(r&&"object"==typeof r)if(r.type===h.ERROR){var o=r.payload&&"string"==typeof r.payload.error?r.payload.error:null;this.emit(h.CLOSED,o?"Popup error: "+o:null),this.close()}else r.type===h.LOADED?(this.popupPromise&&this.popupPromise.resolve(),this.iframeHandshake.promise.then((function(e){n.postMessage({type:h.INIT,payload:{settings:t.settings,useBroadcastChannel:e}})}))):r.type===h.EXTENSION_USB_PERMISSIONS?chrome.tabs.query({currentWindow:!0,active:!0},(function(e){chrome.tabs.create({url:"trezor-usb-permissions.html",index:e[0].index+1},(function(e){}))})):r.type===h.CLOSE_WINDOW&&(this.emit(h.CLOSED),this.close())}},n.handleMessage=function(e){var t=this,n=e.data;if((0,S.getOrigin)(e.origin)===this.origin&&n&&"object"==typeof n)if(n.type===m.LOADED){var r=!(!n.payload||"boolean"!=typeof n.payload.useBroadcastChannel)&&n.payload.useBroadcastChannel;this.iframeHandshake.resolve(r)}else if(n.type===h.BOOTSTRAP)window.clearTimeout(this.openTimeout);else if(n.type===h.ERROR&&this._window){var o=n.payload&&"string"==typeof n.payload.error?n.payload.error:null;this.emit(h.CLOSED,o?"Popup error: "+o:null),this.close()}else n.type===h.LOADED?(this.popupPromise&&this.popupPromise.resolve(),this.iframeHandshake.promise.then((function(e){t._window.postMessage({type:h.INIT,payload:{settings:t.settings,useBroadcastChannel:e}},t.origin)}))):n.type!==h.CANCEL_POPUP_REQUEST&&n.type!==y.CLOSE_UI_WINDOW||this.close()},n.close=function(){this.locked=!1,this.popupPromise=void 0,this.requestTimeout&&(window.clearTimeout(this.requestTimeout),this.requestTimeout=0),this.openTimeout&&(window.clearTimeout(this.openTimeout),this.openTimeout=0),this.closeInterval&&(window.clearInterval(this.closeInterval),this.closeInterval=0),this.extensionPort&&(this.extensionPort.disconnect(),this.extensionPort=null),this.extensionTabId&&(chrome.tabs.update(this.extensionTabId,{active:!0}),this.extensionTabId=0),this._window&&("webextension"===this.settings.env?(chrome.runtime.lastError,chrome.tabs.remove(this._window.id,(function(){chrome.runtime.lastError}))):this._window.close(),this._window=null)},n.postMessage=function(){var e=(0,o.default)(r.default.mark((function e(t){var n=this;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._window||t.type===y.REQUEST_UI_WINDOW||!this.openTimeout){e.next=4;break}return this.close(),(0,v.showPopupRequest)(this.open.bind(this),(function(){n.emit(h.CLOSED)})),e.abrupt("return");case 4:if(!this.popupPromise){e.next=7;break}return e.next=7,this.popupPromise.promise;case 7:this._window&&this._window.postMessage(t,this.origin);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.onBeforeUnload=function(){this.close()},t}(E.default);e.default=O}(X);var Be={},Me={};!function(e){e.__esModule=!0,e.default=void 0;e.default='.trezorconnect-container{position:fixed!important;display:-webkit-box!important;display:-webkit-flex!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-orient:vertical!important;-webkit-box-direction:normal!important;-webkit-flex-direction:column!important;-ms-flex-direction:column!important;flex-direction:column!important;-webkit-box-align:center!important;-webkit-align-items:center!important;-ms-flex-align:center!important;align-items:center!important;z-index:10000!important;width:100%!important;height:100%!important;top:0!important;left:0!important;background:rgba(0,0,0,.35)!important;overflow:auto!important;padding:20px!important;margin:0!important}.trezorconnect-container .trezorconnect-window{position:relative!important;display:block!important;width:370px!important;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif!important;margin:auto!important;border-radius:3px!important;background-color:#fff!important;text-align:center!important;overflow:hidden!important}.trezorconnect-container .trezorconnect-window .trezorconnect-head{text-align:left;padding:12px 24px!important;display:-webkit-box!important;display:-webkit-flex!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-align:center!important;-webkit-align-items:center!important;-ms-flex-align:center!important;align-items:center!important}.trezorconnect-container .trezorconnect-window .trezorconnect-head .trezorconnect-logo{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}.trezorconnect-container .trezorconnect-window .trezorconnect-head .trezorconnect-close{cursor:pointer!important;height:24px!important}.trezorconnect-container .trezorconnect-window .trezorconnect-head .trezorconnect-close svg{fill:#757575;-webkit-transition:fill .3s ease-in-out!important;transition:fill .3s ease-in-out!important}.trezorconnect-container .trezorconnect-window .trezorconnect-head .trezorconnect-close:hover svg{fill:#494949}.trezorconnect-container .trezorconnect-window .trezorconnect-body{padding:24px 24px 32px!important;background:#FBFBFB!important;border-top:1px solid #EBEBEB}.trezorconnect-container .trezorconnect-window .trezorconnect-body h3{color:#505050!important;font-size:16px!important;font-weight:500!important}.trezorconnect-container .trezorconnect-window .trezorconnect-body p{margin:8px 0 24px!important;font-weight:400!important;color:#A9A9A9!important;font-size:12px!important}.trezorconnect-container .trezorconnect-window .trezorconnect-body button{width:100%!important;padding:12px 24px!important;margin:0!important;border-radius:3px!important;font-size:14px!important;font-weight:300!important;cursor:pointer!important;background:#01B757!important;color:#fff!important;border:0!important;-webkit-transition:background-color .3s ease-in-out!important;transition:background-color .3s ease-in-out!important}.trezorconnect-container .trezorconnect-window .trezorconnect-body button:hover{background-color:#00AB51!important}.trezorconnect-container .trezorconnect-window .trezorconnect-body button:active{background-color:#009546!important}/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImlucHV0IiwiJHN0ZGluIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQWNBLHlCQUNJLFNBQUEsZ0JBQ0EsUUFBQSxzQkFDQSxRQUFBLHVCQUNBLFFBQUEsc0JBRUEsUUFBQSxlQUNBLG1CQUFBLG1CQUNBLHNCQUFBLGlCQUNBLHVCQUFBLGlCQUNBLG1CQUFBLGlCQUNBLGVBQUEsaUJBRUEsa0JBQUEsaUJBQ0Esb0JBQUEsaUJBQ0EsZUFBQSxpQkNmTSxZQUFhLGlCREFyQixRQUFTLGdCQWtCSCxNQUFBLGVBQ0EsT0FBQSxlQUNBLElBQUEsWUFDQSxLQUFBLFlBQ0EsV0FBQSwwQkFDQSxTQUFBLGVBQ0EsUUFBQSxlQUNBLE9BQUEsWUNkUiwrQ0RYRSxTQUFVLG1CQTZCQSxRQUFBLGdCQUNBLE1BQUEsZ0JBQ0EsWUFBQSxjQUFBLG1CQUFBLFdBQUEsT0FBQSxpQkFBQSxNQUFBLHFCQUNBLE9BQUEsZUNmVixjQUFlLGNEakJmLGlCQWlCRSxlQWtCWSxXQUFBLGlCQ2ZkLFNBQVUsaUJEbUJJLG1FQUNBLFdBQUEsS0NoQmQsUUFBUyxLQUFLLGVEeEJkLFFBQVMsc0JBMENTLFFBQUEsdUJBQ0EsUUFBQSxzQkNmbEIsUUFBUyxlRGlCSyxrQkE1QlosaUJBOEJvQixvQkFBQSxpQkNoQmxCLGVBQWdCLGlCRC9CWixZQWlCTixpQkFzQ1EsdUZBQ0EsaUJBQUEsRUNwQlYsYUFBYyxFRHBDVixTQUFVLEVBMkRBLEtBQUEsRUFFQSx3RkNwQmQsT0FBUSxrQkR6Q1IsT0FBUSxlQWlFTSw0RkFDQSxLQUFBLFFBQ0EsbUJBQUEsS0FBQSxJQUFBLHNCQ3BCZCxXQUFZLEtBQUssSUFBSyxzQkR3QlIsa0dBQ0EsS0FBQSxRQUVBLG1FQUNBLFFBQUEsS0FBQSxLQUFBLGVBQ0EsV0FBQSxrQkFDQSxXQUFBLElBQUEsTUFBQSxRQUVBLHNFQUNBLE1BQUEsa0JBQ0EsVUFBQSxlQ3JCZCxZQUFhLGNEd0JLLHFFQ3JCbEIsT0FBUSxJQUFJLEVBQUksZUR3QkYsWUFBQSxjQUNJLE1BQUEsa0JDdEJsQixVQUFXLGVBRWIsMEVBQ0UsTUFBTyxlQUNQLFFBQVMsS0FBSyxlQUNkLE9BQVEsWUFDUixjQUFlLGNBQ2YsVUFBVyxlQUNYLFlBQWEsY0FDYixPQUFRLGtCQUNSLFdBQVksa0JBQ1osTUFBTyxlQUNQLE9BQVEsWUFDUixtQkFBb0IsaUJBQWlCLElBQUssc0JBQzFDLFdBQVksaUJBQWlCLElBQUssc0JBRXBDLGdGQUNFLGlCQUFrQixrQkFFcEIsaUZBQ0UsaUJBQWtCIn0= */'}(Me);var Le=f.exports;Be.__esModule=!0,Be.clearTimeout=Be.dispose=Be.postMessage=Be.init=Be.messagePromises=Be.error=Be.timeout=Be.initPromise=Be.origin=Be.instance=void 0;var De,ke,Fe=Le(a),Qe=Le(s.exports),je=Ce,ze=E,Ve=te,Ge=Le(Me);Be.instance=De,Be.origin=ke;var We=(0,je.create)();Be.initPromise=We;var He,qe=0;Be.timeout=qe,Be.error=He;var Je=0,Ke={};Be.messagePromises=Ke;var Ye=function(){var e=(0,Qe.default)(Fe.default.mark((function e(t){var n,r,o,i,a;return Fe.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Be.initPromise=We=(0,je.create)(),(n=document.getElementById("trezorconnect"))?Be.instance=De=n:(Be.instance=De=document.createElement("iframe"),De.frameBorder="0",De.width="0px",De.height="0px",De.style.position="absolute",De.style.display="none",De.style.border="0px",De.style.width="0px",De.style.height="0px",De.id="trezorconnect"),"web"===t.env?(o=t.manifest?JSON.stringify(t.manifest):"undefined",i="version="+t.version+"&manifest="+encodeURIComponent(btoa(JSON.stringify(o))),r=t.iframeSrc+"?"+i):r=t.iframeSrc,De.setAttribute("src",r),t.webusb&&De.setAttribute("allow","usb"),Be.origin=ke=(0,Ve.getOrigin)(De.src),Be.timeout=qe=window.setTimeout((function(){We.reject(ze.ERRORS.TypedError("Init_IframeTimeout"))}),1e4),a=function(){if(De){try{var e=De.contentWindow.location.origin;if(!e||"null"===e)return void Xe()}catch(r){}var n;"undefined"!=typeof chrome&&chrome.runtime&&void 0!==chrome.runtime.onConnect&&(chrome.runtime.onConnect.addListener((function(){})),n=chrome.runtime.id),De.contentWindow.postMessage({type:ze.IFRAME.INIT,payload:{settings:t,extension:n}},ke),De.onload=void 0}else We.reject(ze.ERRORS.TypedError("Init_IframeBlocked"))},De.attachEvent?De.attachEvent("onload",a):De.onload=a,document.body&&(document.body.appendChild(De),Ze()),e.prev=11,e.next=14,We.promise;case 14:e.next=20;break;case 16:throw e.prev=16,e.t0=e.catch(11),De&&(De.parentNode&&De.parentNode.removeChild(De),Be.instance=De=null),e.t0;case 20:return e.prev=20,window.clearTimeout(qe),Be.timeout=qe=0,e.finish(20);case 24:case"end":return e.stop()}}),e,null,[[11,16,20,24]])})));return function(t){return e.apply(this,arguments)}}();Be.init=Ye;var Ze=function(){if(!De)throw ze.ERRORS.TypedError("Init_IframeBlocked");var e=De.ownerDocument,t=e.head||e.getElementsByTagName("head")[0],n=document.createElement("style");n.setAttribute("type","text/css"),n.setAttribute("id","TrezorConnectStylesheet"),n.styleSheet?(n.styleSheet.cssText=Ge.default,t.appendChild(n)):(n.appendChild(document.createTextNode(Ge.default)),t.append(n))},Xe=function(){window.clearTimeout(qe),Be.error=He=ze.ERRORS.TypedError("Init_IframeBlocked"),$e(),We.reject(He)};Be.postMessage=function(e,t){if(void 0===t&&(t=!0),!De)throw ze.ERRORS.TypedError("Init_IframeBlocked");if(t){Je++,e.id=Je,Ke[Je]=(0,je.create)();var n=Ke[Je].promise;return De.contentWindow.postMessage(e,ke),n}return De.contentWindow.postMessage(e,ke),null};var $e=function(){if(De&&De.parentNode)try{De.parentNode.removeChild(De)}catch(e){}Be.instance=De=null,Be.timeout=qe=0};Be.dispose=$e;Be.clearTimeout=function(){window.clearTimeout(qe)};var et={};!function(e){e.__esModule=!0,e.default=void 0;var t=function(e,t,n){var r=e||".trezor-webusb-button",o=document.querySelectorAll(r),i=t+"?"+Date.now();o.forEach((function(e){if(e.getElementsByTagName("iframe").length<1){var t=e.getBoundingClientRect(),r=document.createElement("iframe");r.frameBorder="0",r.width=Math.round(t.width)+"px",r.height=Math.round(t.height)+"px",r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.style.zIndex="1",r.setAttribute("allow","usb"),r.setAttribute("scrolling","no"),r.onload=function(){r.contentWindow.postMessage({},n)},r.src=i,e.append(r)}}))};e.default=t}(et);var tt={__esModule:!0};tt.errorMessage=tt.parseMessage=void 0;tt.parseMessage=function(e){var t={event:e.event,type:e.type,payload:e.payload};return"number"==typeof e.id&&(t.id=e.id),"boolean"==typeof e.success&&(t.success=e.success),t};tt.errorMessage=function(e){return{success:!1,payload:{error:e.message,code:e.code}}};var nt={},rt=f.exports;nt.__esModule=!0,nt.BlockchainMessage=nt.ResponseMessage=nt.TransportMessage=nt.DeviceMessage=nt.UiMessage=void 0;var ot=rt(u.exports),it=E;function at(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function st(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?at(Object(n),!0).forEach((function(t){(0,ot.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}nt.UiMessage=function(e,t){return{event:it.UI_EVENT,type:e,payload:t}};nt.DeviceMessage=function(e,t){return{event:it.DEVICE_EVENT,type:e,payload:t}};nt.TransportMessage=function(e,t){return{event:it.TRANSPORT_EVENT,type:e,payload:t.error?st(st({},t),{},{error:t.error.message,code:t.error.code}):t}};nt.ResponseMessage=function(e,t,n){return void 0===n&&(n=null),{event:it.RESPONSE_EVENT,type:it.RESPONSE_EVENT,id:e,success:t,payload:t?n:{error:n.error.message,code:n.error.code}}};nt.BlockchainMessage=function(e,t){return{event:it.BLOCKCHAIN_EVENT,type:e,payload:t}};var ct={},ut=f.exports;ct.__esModule=!0,ct.parse=ct.corsValidator=ct.getEnv=ct.DEFAULT_PRIORITY=void 0;var lt=ut(u.exports);function dt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var pt="https://connect.trezor.io/"+("8.1.27".split(".").map((function(e){return parseInt(e,10)}))[0]+"/");ct.DEFAULT_PRIORITY=2;var ft={configSrc:"./data/config.json",version:"8.1.27",debug:!1,priority:2,trustedHost:!1,connectSrc:pt,iframeSrc:pt+"iframe.html",popup:!0,popupSrc:pt+"popup.html",webusbSrc:pt+"webusb.html",transportReconnect:!1,webusb:!0,pendingTransportEvent:!0,supportedBrowser:"undefined"==typeof navigator||!/Trident|MSIE|Edge/.test(navigator.userAgent),manifest:null,env:"web",lazyLoad:!1,timestamp:(new Date).getTime(),interactionTimeout:600},Et=function(){if("undefined"!=typeof chrome&&chrome.runtime&&void 0!==chrome.runtime.onConnect)return"webextension";if("undefined"!=typeof navigator){if("string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase())return"react-native";if(navigator.userAgent.toLowerCase().indexOf(" electron/")>-1)return"electron"}return"web"};ct.getEnv=Et;var _t=function(e){if("string"==typeof e)return e.match(/^https:\/\/([A-Za-z0-9\-_]+\.)*trezor\.io\//)||e.match(/^https?:\/\/localhost:[58][0-9]{3}\//)||e.match(/^https:\/\/([A-Za-z0-9\-_]+\.)*sldev\.cz\//)||e.match(/^https?:\/\/([A-Za-z0-9\-_]+\.)*trezoriovpjcahpzkrewelclulmszwbqpzmzgub37gbcjlvluxtruqad\.onion\//)?e:void 0};ct.corsValidator=_t;ct.parse=function(t){void 0===t&&(t={});var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dt(Object(n),!0).forEach((function(t){(0,lt.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},ft);if(Object.prototype.hasOwnProperty.call(t,"debug")&&("boolean"==typeof t.debug?n.debug=t.debug:"string"==typeof t.debug&&(n.debug="true"===t.debug)),"string"==typeof t.connectSrc&&(n.connectSrc=t.connectSrc),void 0!==e&&"string"==typeof e.__TREZOR_CONNECT_SRC&&(n.connectSrc=_t(e.__TREZOR_CONNECT_SRC),n.debug=!0),"undefined"!=typeof window&&window.location&&"string"==typeof window.location.search){var r=window.location.search.split("&").find((function(e){return e.indexOf("trezor-connect-src")>=0}));if(r){var o=r.split("=")[1];n.connectSrc=_t(decodeURIComponent(o)),n.debug=!0}}var i=n.connectSrc||pt;return n.iframeSrc=i+"iframe.html",n.popupSrc=i+"popup.html",n.webusbSrc=i+"webusb.html","boolean"==typeof t.transportReconnect&&(n.transportReconnect=t.transportReconnect),"boolean"==typeof t.webusb&&(n.webusb=t.webusb),"boolean"==typeof t.popup&&(n.popup=t.popup),"boolean"==typeof t.lazyLoad&&(n.lazyLoad=t.lazyLoad),"boolean"==typeof t.pendingTransportEvent&&(n.pendingTransportEvent=t.pendingTransportEvent),"undefined"!=typeof window&&window.location&&"file:"===window.location.protocol&&(n.origin="file://"+window.location.pathname,n.webusb=!1),"string"==typeof t.extension&&(n.extension=t.extension),"string"==typeof t.env?n.env=t.env:n.env=Et(),"number"==typeof t.timestamp&&(n.timestamp=t.timestamp),"number"==typeof t.interactionTimeout&&(n.interactionTimeout=t.interactionTimeout),"object"==typeof t.manifest&&(n.manifest=function(e){if(e&&"string"==typeof e.email&&"string"==typeof e.appUrl)return{email:e.email,appUrl:e.appUrl}}(t.manifest)),ft=n};var ht={__esModule:!0};ht.getLog=ht.enableLogByPrefix=ht.enableLog=ht.initLog=void 0;var mt={DescriptorStream:"color: #77ab59",DeviceList:"color: #36802d",Device:"color: #bada55",Core:"color: #c9df8a",IFrame:"color: #FFFFFF; background: #f4a742;",Popup:"color: #f48a00"},yt=function(){function e(e,t){this.prefix=e,this.enabled=t,this.messages=[],this.css=mt[e]||"color: #000000; background: #FFFFFF;"}var t=e.prototype;return t.addMessage=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];this.messages.push({level:e,prefix:t,message:r,timestamp:(new Date).getTime()}),this.messages.length>100&&this.messages.shift()},t.log=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;(this.addMessage.apply(this,["log",this.prefix].concat(t)),this.enabled)&&(r=console).log.apply(r,[this.prefix].concat(t))},t.error=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;(this.addMessage.apply(this,["error",this.prefix].concat(t)),this.enabled)&&(r=console).error.apply(r,[this.prefix].concat(t))},t.warn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;(this.addMessage.apply(this,["warn",this.prefix].concat(t)),this.enabled)&&(r=console).warn.apply(r,[this.prefix].concat(t))},t.debug=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r;(this.addMessage.apply(this,["debug",this.prefix].concat(t)),this.enabled)&&(r=console).log.apply(r,["%c"+this.prefix,this.css].concat(t))},e}(),bt={};ht.initLog=function(e,t){var n=new yt(e,!!t);return bt[e]=n,n};ht.enableLog=function(e){Object.keys(bt).forEach((function(t){bt[t].enabled=e}))};ht.enableLogByPrefix=function(e,t){bt[e]&&(bt[e].enabled=t)};ht.getLog=function(){var e=[];return Object.keys(bt).forEach((function(t){e=e.concat(bt[t].messages)})),e.sort((function(e,t){return e.timestamp-t.timestamp})),e};var vt={},St={},Tt=t(Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"})),Ot={},gt=t(Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"})),Rt={__esModule:!0};Rt.Enum_TezosBallotType=Rt.Enum_TezosContractType=Rt.Enum_NEMImportanceTransferMode=Rt.Enum_NEMModificationType=Rt.Enum_NEMSupplyChangeType=Rt.Enum_NEMMosaicLevy=Rt.Enum_WordRequestType=Rt.Enum_RecoveryDeviceType=Rt.Enum_SdProtectOperationType=Rt.Enum_Capability=Rt.Enum_LiskTransactionType=Rt.Enum_DebugSwipeDirection=Rt.Enum_PinMatrixRequestType=Rt.Enum_ButtonRequestType=Rt.Enum_FailureType=Rt.Enum_RequestType=Rt.Enum_BinanceTimeInForce=Rt.Enum_BinanceOrderSide=Rt.Enum_BinanceOrderType=Rt.Enum_SafetyCheckLevel=Rt.Enum_BackupType=Rt.Enum_CardanoPoolRelayType=Rt.Enum_CardanoCertificateType=Rt.Enum_CardanoAddressType=Rt.Enum_AmountUnit=Rt.Enum_DecredStakingSpendType=Rt.Enum_OutputScriptType=Rt.Enum_InputScriptType=void 0;var It=Object.freeze({SPENDADDRESS:0,SPENDMULTISIG:1,EXTERNAL:2,SPENDWITNESS:3,SPENDP2SHWITNESS:4});Rt.Enum_InputScriptType=It;var wt=Object.freeze({PAYTOADDRESS:0,PAYTOSCRIPTHASH:1,PAYTOMULTISIG:2,PAYTOOPRETURN:3,PAYTOWITNESS:4,PAYTOP2SHWITNESS:5});Rt.Enum_OutputScriptType=wt;var At=Object.freeze({SSGen:0,SSRTX:1});Rt.Enum_DecredStakingSpendType=At;var Nt=Object.freeze({BITCOIN:0,MILLIBITCOIN:1,MICROBITCOIN:2,SATOSHI:3});Rt.Enum_AmountUnit=Nt;var Ct=Object.freeze({BASE:0,BASE_SCRIPT_KEY:1,BASE_KEY_SCRIPT:2,BASE_SCRIPT_SCRIPT:3,POINTER:4,POINTER_SCRIPT:5,ENTERPRISE:6,ENTERPRISE_SCRIPT:7,BYRON:8,REWARD:14,REWARD_SCRIPT:15});Rt.Enum_CardanoAddressType=Ct;var xt=Object.freeze({STAKE_REGISTRATION:0,STAKE_DEREGISTRATION:1,STAKE_DELEGATION:2,STAKE_POOL_REGISTRATION:3});Rt.Enum_CardanoCertificateType=xt;var Pt=Object.freeze({SINGLE_HOST_IP:0,SINGLE_HOST_NAME:1,MULTIPLE_HOST_NAME:2});Rt.Enum_CardanoPoolRelayType=Pt;var Ut=Object.freeze({Bip39:0,Slip39_Basic:1,Slip39_Advanced:2});Rt.Enum_BackupType=Ut;var Bt=Object.freeze({Strict:0,PromptAlways:1,PromptTemporarily:2});Rt.Enum_SafetyCheckLevel=Bt;var Mt=Object.freeze({OT_UNKNOWN:0,MARKET:1,LIMIT:2,OT_RESERVED:3});Rt.Enum_BinanceOrderType=Mt;var Lt=Object.freeze({SIDE_UNKNOWN:0,BUY:1,SELL:2});Rt.Enum_BinanceOrderSide=Lt;var Dt=Object.freeze({TIF_UNKNOWN:0,GTE:1,TIF_RESERVED:2,IOC:3});Rt.Enum_BinanceTimeInForce=Dt;var kt=Object.freeze({TXINPUT:0,TXOUTPUT:1,TXMETA:2,TXFINISHED:3,TXEXTRADATA:4,TXORIGINPUT:5,TXORIGOUTPUT:6});Rt.Enum_RequestType=kt;var Ft=Object.freeze({Failure_UnexpectedMessage:1,Failure_ButtonExpected:2,Failure_DataError:3,Failure_ActionCancelled:4,Failure_PinExpected:5,Failure_PinCancelled:6,Failure_PinInvalid:7,Failure_InvalidSignature:8,Failure_ProcessError:9,Failure_NotEnoughFunds:10,Failure_NotInitialized:11,Failure_PinMismatch:12,Failure_WipeCodeMismatch:13,Failure_InvalidSession:14,Failure_FirmwareError:99});Rt.Enum_FailureType=Ft;var Qt=Object.freeze({ButtonRequest_Other:1,ButtonRequest_FeeOverThreshold:2,ButtonRequest_ConfirmOutput:3,ButtonRequest_ResetDevice:4,ButtonRequest_ConfirmWord:5,ButtonRequest_WipeDevice:6,ButtonRequest_ProtectCall:7,ButtonRequest_SignTx:8,ButtonRequest_FirmwareCheck:9,ButtonRequest_Address:10,ButtonRequest_PublicKey:11,ButtonRequest_MnemonicWordCount:12,ButtonRequest_MnemonicInput:13,_Deprecated_ButtonRequest_PassphraseType:14,ButtonRequest_UnknownDerivationPath:15,ButtonRequest_RecoveryHomepage:16,ButtonRequest_Success:17,ButtonRequest_Warning:18,ButtonRequest_PassphraseEntry:19,ButtonRequest_PinEntry:20});Rt.Enum_ButtonRequestType=Qt;var jt=Object.freeze({PinMatrixRequestType_Current:1,PinMatrixRequestType_NewFirst:2,PinMatrixRequestType_NewSecond:3,PinMatrixRequestType_WipeCodeFirst:4,PinMatrixRequestType_WipeCodeSecond:5});Rt.Enum_PinMatrixRequestType=jt;var zt=Object.freeze({UP:0,DOWN:1,LEFT:2,RIGHT:3});Rt.Enum_DebugSwipeDirection=zt;var Vt=Object.freeze({Transfer:0,RegisterSecondPassphrase:1,RegisterDelegate:2,CastVotes:3,RegisterMultisignatureAccount:4,CreateDapp:5,TransferIntoDapp:6,TransferOutOfDapp:7});Rt.Enum_LiskTransactionType=Vt;var Gt=Object.freeze({Capability_Bitcoin:1,Capability_Bitcoin_like:2,Capability_Binance:3,Capability_Cardano:4,Capability_Crypto:5,Capability_EOS:6,Capability_Ethereum:7,Capability_Lisk:8,Capability_Monero:9,Capability_NEM:10,Capability_Ripple:11,Capability_Stellar:12,Capability_Tezos:13,Capability_U2F:14,Capability_Shamir:15,Capability_ShamirGroups:16,Capability_PassphraseEntry:17});Rt.Enum_Capability=Gt;var Wt=Object.freeze({DISABLE:0,ENABLE:1,REFRESH:2});Rt.Enum_SdProtectOperationType=Wt;var Ht=Object.freeze({RecoveryDeviceType_ScrambledWords:0,RecoveryDeviceType_Matrix:1});Rt.Enum_RecoveryDeviceType=Ht;var qt=Object.freeze({WordRequestType_Plain:0,WordRequestType_Matrix9:1,WordRequestType_Matrix6:2});Rt.Enum_WordRequestType=qt;var Jt=Object.freeze({MosaicLevy_Absolute:1,MosaicLevy_Percentile:2});Rt.Enum_NEMMosaicLevy=Jt;var Kt=Object.freeze({SupplyChange_Increase:1,SupplyChange_Decrease:2});Rt.Enum_NEMSupplyChangeType=Kt;var Yt=Object.freeze({CosignatoryModification_Add:1,CosignatoryModification_Delete:2});Rt.Enum_NEMModificationType=Yt;var Zt=Object.freeze({ImportanceTransfer_Activate:1,ImportanceTransfer_Deactivate:2});Rt.Enum_NEMImportanceTransferMode=Zt;var Xt=Object.freeze({Implicit:0,Originated:1});Rt.Enum_TezosContractType=Xt;var $t=Object.freeze({Yay:0,Nay:1,Pass:2});Rt.Enum_TezosBallotType=$t;var en=t(Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"})),tn=t(Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"})),nn=t(Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"})),rn={__esModule:!0};rn.CardanoPoolRelayType=rn.CardanoCertificateType=rn.CardanoAddressType=void 0;var on=Rt;rn.CardanoAddressType=on.Enum_CardanoAddressType,rn.CardanoCertificateType=on.Enum_CardanoCertificateType,rn.CardanoPoolRelayType=on.Enum_CardanoPoolRelayType;var an=t(Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"})),sn=t(Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"})),cn=t(Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"})),un=t(Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"})),ln=t(Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"})),dn=t(Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"})),pn=t(Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"})),fn=t(Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"})),En=t(Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"})),_n={},hn={},mn=_.exports;mn(E),mn(Tt),mn(Ot),mn(gt),mn(Rt),mn(en),mn(tn),mn(nn),mn(rn),mn(an),mn(sn),mn(cn),mn(un),mn(ln),mn(dn),mn(pn),mn(fn),mn(En),mn(_n),mn(hn);var yn=t(Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module"}));!function(e){e.__esModule=!0;var t=St;Object.keys(t).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===t[n]||(e[n]=t[n]))}));var n=_n;Object.keys(n).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===n[t]||(e[t]=n[t]))}));var r=En;Object.keys(r).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===r[t]||(e[t]=r[t]))}));var o=Tt;Object.keys(o).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===o[t]||(e[t]=o[t]))}));var i=en;Object.keys(i).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===i[t]||(e[t]=i[t]))}));var a=Ot;Object.keys(a).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===a[t]||(e[t]=a[t]))}));var s=gt;Object.keys(s).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===s[t]||(e[t]=s[t]))}));var c=tn;Object.keys(c).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===c[t]||(e[t]=c[t]))}));var u=nn;Object.keys(u).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===u[t]||(e[t]=u[t]))}));var l=rn;Object.keys(l).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===l[t]||(e[t]=l[t]))}));var d=an;Object.keys(d).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===d[t]||(e[t]=d[t]))}));var p=sn;Object.keys(p).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===p[t]||(e[t]=p[t]))}));var f=cn;Object.keys(f).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===f[t]||(e[t]=f[t]))}));var E=un;Object.keys(E).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===E[t]||(e[t]=E[t]))}));var _=ln;Object.keys(_).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===_[t]||(e[t]=_[t]))}));var h=dn;Object.keys(h).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===h[t]||(e[t]=h[t]))}));var m=pn;Object.keys(m).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===m[t]||(e[t]=m[t]))}));var y=fn;Object.keys(y).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===y[t]||(e[t]=y[t]))}));var b=hn;Object.keys(b).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===b[t]||(e[t]=b[t]))}));var v=yn;Object.keys(v).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===v[t]||(e[t]=v[t]))}))}(vt);var bn=_.exports,vn=f.exports;Z.__esModule=!0,Z.disableWebUSB=Z.requestLogin=Z.customMessage=Z.getSettings=Z.renderWebUSBButton=Z.uiResponse=Z.call=Z.init=Z.cancel=Z.dispose=Z.manifest=Z.eventEmitter=void 0;var Sn=vn(u.exports),Tn=vn(a),On=vn(s.exports),gn=vn(l.exports),Rn=vn(X),In=bn(Be),wn=vn(et),An=tt,Nn=nt,Cn=ct,xn=ht,Pn=E;function Un(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Un(Object(n),!0).forEach((function(t){(0,Sn.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Un(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}bn(vt);var Mn=new gn.default;Z.eventEmitter=Mn;var Ln,Dn,kn=(0,xn.initLog)("[trezor-connect.js]"),Fn=function(){var e=new Rn.default(Ln);return e.on(Pn.POPUP.CLOSED,(function(e){In.postMessage({type:Pn.POPUP.CLOSED,payload:e?{error:e}:null},!1)})),e};Z.manifest=function(e){Ln=(0,Cn.parse)({manifest:e})};var Qn=function(){In.dispose(),Dn&&Dn.close()};Z.dispose=Qn;Z.cancel=function(e){Dn&&Dn.emit(Pn.POPUP.CLOSED,e)};var jn=function(e){if(e.origin===In.origin){var t=(0,An.parseMessage)(e.data),n=t.event,r=t.type,o=t.payload,i=t.id||0;switch(kn.log("handleMessage",t),n){case Pn.RESPONSE_EVENT:In.messagePromises[i]?(In.messagePromises[i].resolve({id:i,success:t.success,payload:o}),delete In.messagePromises[i]):kn.warn("Unknown message id "+i);break;case Pn.DEVICE_EVENT:case Pn.TRANSPORT_EVENT:case Pn.BLOCKCHAIN_EVENT:Mn.emit(n,t),Mn.emit(r,o);break;case Pn.UI_EVENT:if(r===Pn.IFRAME.BOOTSTRAP){In.clearTimeout();break}r===Pn.IFRAME.LOADED&&In.initPromise.resolve(),r===Pn.IFRAME.ERROR&&In.initPromise.reject(o.error),Mn.emit(n,t),Mn.emit(r,o);break;default:kn.log("Undefined message",n,e)}}},zn=function(){var e=(0,On.default)(Tn.default.mark((function e(t){return Tn.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t={}),!In.instance){e.next=3;break}throw Pn.ERRORS.TypedError("Init_AlreadyInitialized");case 3:if(Ln||(Ln=(0,Cn.parse)(t)),Ln.manifest){e.next=6;break}throw Pn.ERRORS.TypedError("Init_ManifestMissing");case 6:if(!Ln.lazyLoad){e.next=9;break}return Ln.lazyLoad=!1,e.abrupt("return");case 9:return Dn||(Dn=Fn()),kn.enabled=!!Ln.debug,window.addEventListener("message",jn),window.addEventListener("unload",Qn),e.next=15,In.init(Ln);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Z.init=zn;var Vn=function(){var e=(0,On.default)(Tn.default.mark((function e(t){var n;return Tn.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(In.instance||In.timeout){e.next=15;break}if((Ln=(0,Cn.parse)(Ln)).manifest){e.next=4;break}return e.abrupt("return",(0,An.errorMessage)(Pn.ERRORS.TypedError("Init_ManifestMissing")));case 4:return Dn||(Dn=Fn()),Dn.request(!0),e.prev=6,e.next=9,zn(Ln);case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(6),Dn&&(["Init_IframeBlocked","Init_IframeTimeout"].includes(e.t0.code)?Dn.postMessage((0,Nn.UiMessage)(Pn.UI.IFRAME_FAILURE)):Dn.close()),e.abrupt("return",(0,An.errorMessage)(e.t0));case 15:if(!In.timeout){e.next=17;break}return e.abrupt("return",(0,An.errorMessage)(Pn.ERRORS.TypedError("Init_ManifestMissing")));case 17:if(!In.error){e.next=19;break}return e.abrupt("return",(0,An.errorMessage)(In.error));case 19:return Ln.popup&&Dn&&Dn.request(),e.prev=20,e.next=23,In.postMessage({type:Pn.IFRAME.CALL,payload:t});case 23:if(!(n=e.sent)){e.next=27;break}return!n.success&&"Device_CallInProgress"!==n.payload.error.code&&Dn&&Dn.unlock(),e.abrupt("return",n);case 27:return Dn&&Dn.unlock(),e.abrupt("return",(0,An.errorMessage)(Pn.ERRORS.TypedError("Method_NoResponse")));case 31:return e.prev=31,e.t1=e.catch(20),kn.error("__call error",e.t1),Dn&&Dn.close(),e.abrupt("return",(0,An.errorMessage)(e.t1));case 36:case"end":return e.stop()}}),e,null,[[6,11],[20,31]])})));return function(t){return e.apply(this,arguments)}}();Z.call=Vn;var Gn=function(e){In.postMessage({event:Pn.UI_EVENT,type:Pn.UI.CUSTOM_MESSAGE_RESPONSE,payload:e})};Z.uiResponse=function(e){var t=e.type,n=e.payload;In.postMessage({event:Pn.UI_EVENT,type:t,payload:n})};Z.renderWebUSBButton=function(e){(0,wn.default)(e,Ln.webusbSrc,In.origin)};Z.getSettings=function(){return In.instance?Vn({method:"getSettings"}):Promise.resolve((0,An.errorMessage)(Pn.ERRORS.TypedError("Init_NotInitialized")))};var Wn=function(){var e=(0,On.default)(Tn.default.mark((function e(t){var n,r,o;return Tn.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"==typeof t.callback){e.next=2;break}return e.abrupt("return",(0,An.errorMessage)(Pn.ERRORS.TypedError("Method_CustomMessage_Callback")));case 2:return n=t.callback,r=function(){var e=(0,On.default)(Tn.default.mark((function e(t){var r,o;return Tn.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.data)||r.type!==Pn.UI.CUSTOM_MESSAGE_REQUEST){e.next=6;break}return e.next=4,n(r.payload);case 4:o=e.sent,Gn(o||{message:"release"});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),window.addEventListener("message",r,!1),e.next=7,Vn(Bn(Bn({method:"customMessage"},t),{},{callback:null}));case 7:return o=e.sent,window.removeEventListener("message",r),e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Z.customMessage=Wn;var Hn=function(){var e=(0,On.default)(Tn.default.mark((function e(t){var n,r,o;return Tn.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof t.callback){e.next=9;break}return n=t.callback,r=function(){var e=(0,On.default)(Tn.default.mark((function e(t){var r,o;return Tn.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=t.data)||r.type!==Pn.UI.LOGIN_CHALLENGE_REQUEST){e.next=12;break}return e.prev=2,e.next=5,n();case 5:o=e.sent,In.postMessage({event:Pn.UI_EVENT,type:Pn.UI.LOGIN_CHALLENGE_RESPONSE,payload:o}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),In.postMessage({event:Pn.UI_EVENT,type:Pn.UI.LOGIN_CHALLENGE_RESPONSE,payload:e.t0.message});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),window.addEventListener("message",r,!1),e.next=6,Vn(Bn(Bn({method:"requestLogin"},t),{},{asyncChallenge:!0,callback:null}));case 6:return o=e.sent,window.removeEventListener("message",r),e.abrupt("return",o);case 9:return e.abrupt("return",Vn(Bn({method:"requestLogin"},t)));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Z.requestLogin=Hn;Z.disableWebUSB=function(){In.postMessage({event:Pn.UI_EVENT,type:Pn.TRANSPORT.DISABLE_WEBUSB})},function(e){var t=f.exports;e.__esModule=!0;var n={};e.default=void 0;var r=t(u.exports),o=E;Object.keys(o).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||t in e&&e[t]===o[t]||(e[t]=o[t]))}));var i=Z,a=vt;function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Object.keys(a).forEach((function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(n,t)||t in e&&e[t]===a[t]||(e[t]=a[t]))}));var l={manifest:i.manifest,init:i.init,getSettings:i.getSettings,on:function(e,t){i.eventEmitter.on(e,t)},off:function(e,t){i.eventEmitter.removeListener(e,t)},removeAllListeners:function(){i.eventEmitter.removeAllListeners()},uiResponse:i.uiResponse,blockchainGetAccountBalanceHistory:function(e){return(0,i.call)(c({method:"blockchainGetAccountBalanceHistory"},e))},blockchainGetCurrentFiatRates:function(e){return(0,i.call)(c({method:"blockchainGetCurrentFiatRates"},e))},blockchainGetFiatRatesForTimestamps:function(e){return(0,i.call)(c({method:"blockchainGetFiatRatesForTimestamps"},e))},blockchainDisconnect:function(e){return(0,i.call)(c({method:"blockchainDisconnect"},e))},blockchainEstimateFee:function(e){return(0,i.call)(c({method:"blockchainEstimateFee"},e))},blockchainGetTransactions:function(e){return(0,i.call)(c({method:"blockchainGetTransactions"},e))},blockchainSetCustomBackend:function(e){return(0,i.call)(c({method:"blockchainSetCustomBackend"},e))},blockchainSubscribe:function(e){return(0,i.call)(c({method:"blockchainSubscribe"},e))},blockchainSubscribeFiatRates:function(e){return(0,i.call)(c({method:"blockchainSubscribeFiatRates"},e))},blockchainUnsubscribe:function(e){return(0,i.call)(c({method:"blockchainUnsubscribe"},e))},blockchainUnsubscribeFiatRates:function(e){return(0,i.call)(c({method:"blockchainUnsubscribeFiatRates"},e))},customMessage:function(e){return(0,i.customMessage)(e)},requestLogin:function(e){return(0,i.requestLogin)(e)},cardanoGetAddress:function(e){var t=i.eventEmitter.listenerCount(o.UI.ADDRESS_VALIDATION)>0;return(0,i.call)(c(c({method:"cardanoGetAddress"},e),{},{useEventListener:t}))},cardanoGetPublicKey:function(e){return(0,i.call)(c({method:"cardanoGetPublicKey"},e))},cardanoSignTransaction:function(e){return(0,i.call)(c({method:"cardanoSignTransaction"},e))},cipherKeyValue:function(e){return(0,i.call)(c({method:"cipherKeyValue"},e))},composeTransaction:function(e){return(0,i.call)(c({method:"composeTransaction"},e))},debugLinkDecision:function(e){return(0,i.call)(c({method:"debugLinkDecision"},e))},debugLinkGetState:function(e){return(0,i.call)(c({method:"debugLinkGetState"},e))},ethereumGetAddress:function(e){var t=i.eventEmitter.listenerCount(o.UI.ADDRESS_VALIDATION)>0;return(0,i.call)(c(c({method:"ethereumGetAddress"},e),{},{useEventListener:t}))},ethereumGetPublicKey:function(e){return(0,i.call)(c({method:"ethereumGetPublicKey"},e))},ethereumSignMessage:function(e){return(0,i.call)(c({method:"ethereumSignMessage"},e))},ethereumSignTransaction:function(e){return(0,i.call)(c({method:"ethereumSignTransaction"},e))},ethereumVerifyMessage:function(e){return(0,i.call)(c({method:"ethereumVerifyMessage"},e))},getAccountInfo:function(e){return(0,i.call)(c({method:"getAccountInfo"},e))},getAddress:function(e){var t=i.eventEmitter.listenerCount(o.UI.ADDRESS_VALIDATION)>0;return(0,i.call)(c(c({method:"getAddress"},e),{},{useEventListener:t}))},getDeviceState:function(e){return(0,i.call)(c({method:"getDeviceState"},e))},getFeatures:function(e){return(0,i.call)(c({method:"getFeatures"},e))},getPublicKey:function(e){return(0,i.call)(c({method:"getPublicKey"},e))},liskGetAddress:function(e){var t=i.eventEmitter.listenerCount(o.UI.ADDRESS_VALIDATION)>0;return(0,i.call)(c(c({method:"liskGetAddress"},e),{},{useEventListener:t}))},liskGetPublicKey:function(e){return(0,i.call)(c({method:"liskGetPublicKey"},e))},liskSignMessage:function(e){return(0,i.call)(c({method:"liskSignMessage"},e))},liskSignTransaction:function(e){return(0,i.call)(c({method:"liskSignTransaction"},e))},liskVerifyMessage:function(e){return(0,i.call)(c({method:"liskVerifyMessage"},e))},nemGetAddress:function(e){var t=i.eventEmitter.listenerCount(o.UI.ADDRESS_VALIDATION)>0;return(0,i.call)(c(c({method:"nemGetAddress"},e),{},{useEventListener:t}))},nemSignTransaction:function(e){return(0,i.call)(c({method:"nemSignTransaction"},e))},pushTransaction:function(e){return(0,i.call)(c({method:"pushTransaction"},e))},rippleGetAddress:function(e){var t=i.eventEmitter.listenerCount(o.UI.ADDRESS_VALIDATION)>0;return(0,i.call)(c(c({method:"rippleGetAddress"},e),{},{useEventListener:t}))},rippleSignTransaction:function(e){return(0,i.call)(c({method:"rippleSignTransaction"},e))},signMessage:function(e){return(0,i.call)(c({method:"signMessage"},e))},signTransaction:function(e){return(0,i.call)(c({method:"signTransaction"},e))},stellarGetAddress:function(e){var t=i.eventEmitter.listenerCount(o.UI.ADDRESS_VALIDATION)>0;return(0,i.call)(c(c({method:"stellarGetAddress"},e),{},{useEventListener:t}))},stellarSignTransaction:function(e){return(0,i.call)(c({method:"stellarSignTransaction"},e))},tezosGetAddress:function(e){var t=i.eventEmitter.listenerCount(o.UI.ADDRESS_VALIDATION)>0;return(0,i.call)(c(c({method:"tezosGetAddress"},e),{},{useEventListener:t}))},tezosGetPublicKey:function(e){return(0,i.call)(c({method:"tezosGetPublicKey"},e))},tezosSignTransaction:function(e){return(0,i.call)(c({method:"tezosSignTransaction"},e))},eosGetPublicKey:function(e){return(0,i.call)(c({method:"eosGetPublicKey"},e))},eosSignTransaction:function(e){return(0,i.call)(c({method:"eosSignTransaction"},e))},binanceGetAddress:function(e){var t=i.eventEmitter.listenerCount(o.UI.ADDRESS_VALIDATION)>0;return(0,i.call)(c(c({method:"binanceGetAddress"},e),{},{useEventListener:t}))},binanceGetPublicKey:function(e){return(0,i.call)(c({method:"binanceGetPublicKey"},e))},binanceSignTransaction:function(e){return(0,i.call)(c({method:"binanceSignTransaction"},e))},verifyMessage:function(e){return(0,i.call)(c({method:"verifyMessage"},e))},resetDevice:function(e){return(0,i.call)(c({method:"resetDevice"},e))},wipeDevice:function(e){return(0,i.call)(c({method:"wipeDevice"},e))},applyFlags:function(e){return(0,i.call)(c({method:"applyFlags"},e))},applySettings:function(e){return(0,i.call)(c({method:"applySettings"},e))},backupDevice:function(e){return(0,i.call)(c({method:"backupDevice"},e))},changePin:function(e){return(0,i.call)(c({method:"changePin"},e))},firmwareUpdate:function(e){return(0,i.call)(c({method:"firmwareUpdate"},e))},recoveryDevice:function(e){return(0,i.call)(c({method:"recoveryDevice"},e))},getCoinInfo:function(e){return(0,i.call)(c({method:"getCoinInfo"},e))},dispose:i.dispose,cancel:i.cancel,renderWebUSBButton:i.renderWebUSBButton,disableWebUSB:i.disableWebUSB};e.default=l}(p);var qn=n(p),Jn=Object.freeze(Object.assign(Object.create(null),p,{[Symbol.toStringTag]:"Module",default:qn}));export{Jn as i};

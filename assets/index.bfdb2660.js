import{s as r,l as e,k as t,a as n,d as f}from"./keccak.c0da6441.js";import{Q as i,N as o}from"./vendor.19c9fb29.js";import{e as u,a,b as s}from"./index.645b5434.js";var c={},l={},d=i.exports,h=new(0,u.ec)("secp256k1"),p=h.curve;l.privateKeyExport=function(r,e){var t=new d(r);if(t.ucmp(p.n)>=0)throw new Error("couldn't export to DER format");var n=h.g.mul(t);return g(n.getX(),n.getY(),e)},l.privateKeyModInverse=function(r){var e=new d(r);if(e.ucmp(p.n)>=0||e.isZero())throw new Error("private key range is invalid");return e.invm(p.n).toArrayLike(Buffer,"be",32)},l.signatureImport=function(r){var e=new d(r.r);e.ucmp(p.n)>=0&&(e=new d(0));var t=new d(r.s);return t.ucmp(p.n)>=0&&(t=new d(0)),Buffer.concat([e.toArrayLike(Buffer,"be",32),t.toArrayLike(Buffer,"be",32)])},l.ecdhUnsafe=function(r,e,t){var n=h.keyFromPublic(r),f=new d(e);if(f.ucmp(p.n)>=0||f.isZero())throw new Error("scalar was invalid (zero or overflow)");var i=n.pub.mul(f);return g(i.getX(),i.getY(),t)};var g=function(r,e,t){var n=void 0;return t?((n=Buffer.alloc(33))[0]=e.isOdd()?3:2,r.toArrayLike(Buffer,"be",32).copy(n,1)):((n=Buffer.alloc(65))[0]=4,r.toArrayLike(Buffer,"be",32).copy(n,1),e.toArrayLike(Buffer,"be",32).copy(n,33)),n},y={},v=Buffer.from([48,129,211,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,133,48,129,130,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,33,2,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,36,3,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),m=Buffer.from([48,130,1,19,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,165,48,129,162,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,65,4,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,72,58,218,119,38,163,196,101,93,164,251,252,14,17,8,168,253,23,180,72,166,133,84,25,156,71,208,143,251,16,212,184,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,68,3,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);y.privateKeyExport=function(r,e,t){var n=Buffer.from(t?v:m);return r.copy(n,t?8:9),e.copy(n,t?181:214),n},y.privateKeyImport=function(r){var e=r.length,t=0;if(e<t+1||48!==r[t])return null;if(e<(t+=1)+1||!(128&r[t]))return null;var n=127&r[t];if(n<1||n>2)return null;if(e<(t+=1)+n)return null;var f=r[t+n-1]|(n>1?r[t+n-2]<<8:0);return e<(t+=n)+f||e<t+3||2!==r[t]||1!==r[t+1]||1!==r[t+2]||e<(t+=3)+2||4!==r[t]||r[t+1]>32||e<t+2+r[t+1]?null:r.slice(t+2,t+2+r[t+1])},y.signatureImportLax=function(r){var e=Buffer.alloc(32,0),t=Buffer.alloc(32,0),n=r.length,f=0;if(48!==r[f++])return null;var i=r[f++];if(128&i&&(f+=i-128)>n)return null;if(2!==r[f++])return null;var o=r[f++];if(128&o){if(f+(i=o-128)>n)return null;for(;i>0&&0===r[f];f+=1,i-=1);for(o=0;i>0;f+=1,i-=1)o=(o<<8)+r[f]}if(o>n-f)return null;var u=f;if(f+=o,2!==r[f++])return null;var a=r[f++];if(128&a){if(f+(i=a-128)>n)return null;for(;i>0&&0===r[f];f+=1,i-=1);for(a=0;i>0;f+=1,i-=1)a=(a<<8)+r[f]}if(a>n-f)return null;var s=f;for(f+=a;o>0&&0===r[u];o-=1,u+=1);if(o>32)return null;var c=r.slice(u,u+o);for(c.copy(e,32-c.length);a>0&&0===r[s];a-=1,s+=1);if(a>32)return null;var l=r.slice(s,s+a);return l.copy(t,32-l.length),{r:e,s:t}};var w=r,b=l,A=y,x=function(r){return 32===r.length&&w.privateKeyVerify(Uint8Array.from(r))},B={privateKeyVerify:x,privateKeyExport:function(r,e){if(32!==r.length)throw new RangeError("private key length is invalid");var t=b.privateKeyExport(r,e);return A.privateKeyExport(r,t,e)},privateKeyImport:function(r){if(null!==(r=A.privateKeyImport(r))&&32===r.length&&x(r))return r;throw new Error("couldn't import from DER format")},privateKeyNegate:function(r){return Buffer.from(w.privateKeyNegate(Uint8Array.from(r)))},privateKeyModInverse:function(r){if(32!==r.length)throw new Error("private key length is invalid");return Buffer.from(b.privateKeyModInverse(Uint8Array.from(r)))},privateKeyTweakAdd:function(r,e){return Buffer.from(w.privateKeyTweakAdd(Uint8Array.from(r),e))},privateKeyTweakMul:function(r,e){return Buffer.from(w.privateKeyTweakMul(Uint8Array.from(r),Uint8Array.from(e)))},publicKeyCreate:function(r,e){return Buffer.from(w.publicKeyCreate(Uint8Array.from(r),e))},publicKeyConvert:function(r,e){return Buffer.from(w.publicKeyConvert(Uint8Array.from(r),e))},publicKeyVerify:function(r){return(33===r.length||65===r.length)&&w.publicKeyVerify(Uint8Array.from(r))},publicKeyTweakAdd:function(r,e,t){return Buffer.from(w.publicKeyTweakAdd(Uint8Array.from(r),Uint8Array.from(e),t))},publicKeyTweakMul:function(r,e,t){return Buffer.from(w.publicKeyTweakMul(Uint8Array.from(r),Uint8Array.from(e),t))},publicKeyCombine:function(r,e){var t=[];return r.forEach((function(r){t.push(Uint8Array.from(r))})),Buffer.from(w.publicKeyCombine(t,e))},signatureNormalize:function(r){return Buffer.from(w.signatureNormalize(Uint8Array.from(r)))},signatureExport:function(r){return Buffer.from(w.signatureExport(Uint8Array.from(r)))},signatureImport:function(r){return Buffer.from(w.signatureImport(Uint8Array.from(r)))},signatureImportLax:function(r){if(0===r.length)throw new RangeError("signature length is invalid");var e=A.signatureImportLax(r);if(null===e)throw new Error("couldn't parse DER signature");return b.signatureImport(e)},sign:function(r,e,t){if(null===t)throw new TypeError("options should be an Object");var n=void 0;if(t){if(n={},null===t.data)throw new TypeError("options.data should be a Buffer");if(t.data){if(32!==t.data.length)throw new RangeError("options.data length is invalid");n.data=new Uint8Array(t.data)}if(null===t.noncefn)throw new TypeError("options.noncefn should be a Function");t.noncefn&&(n.noncefn=function(r,e,n,f,i){var o=null!=n?Buffer.from(n):null,u=null!=f?Buffer.from(f):null,a=Buffer.from("");return t.noncefn&&(a=t.noncefn(Buffer.from(r),Buffer.from(e),o,u,i)),Uint8Array.from(a)})}var f=w.ecdsaSign(Uint8Array.from(r),Uint8Array.from(e),n);return{signature:Buffer.from(f.signature),recovery:f.recid}},verify:function(r,e,t){return w.ecdsaVerify(Uint8Array.from(e),Uint8Array.from(r),t)},recover:function(r,e,t,n){return Buffer.from(w.ecdsaRecover(Uint8Array.from(e),t,Uint8Array.from(r),n))},ecdh:function(r,e){return Buffer.from(w.ecdh(Uint8Array.from(r),Uint8Array.from(e),{}))},ecdhUnsafe:function(r,e,t){if(33!==r.length&&65!==r.length)throw new RangeError("public key length is invalid");if(32!==e.length)throw new RangeError("private key length is invalid");return Buffer.from(b.ecdhUnsafe(Uint8Array.from(r),Uint8Array.from(e),t))}};!function(r){var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},u=t,c=u.keccak224,l=u.keccak384,d=u.keccak256,h=u.keccak512,p=B,g=n.exports,y=f,v=i.exports,m=s,w=a.exports.Buffer;Object.assign(r,e),r.MAX_INTEGER=new v("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16),r.TWO_POW256=new v("10000000000000000000000000000000000000000000000000000000000000000",16),r.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",r.SHA3_NULL_S=r.KECCAK256_NULL_S,r.KECCAK256_NULL=w.from(r.KECCAK256_NULL_S,"hex"),r.SHA3_NULL=r.KECCAK256_NULL,r.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",r.SHA3_RLP_ARRAY_S=r.KECCAK256_RLP_ARRAY_S,r.KECCAK256_RLP_ARRAY=w.from(r.KECCAK256_RLP_ARRAY_S,"hex"),r.SHA3_RLP_ARRAY=r.KECCAK256_RLP_ARRAY,r.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",r.SHA3_RLP_S=r.KECCAK256_RLP_S,r.KECCAK256_RLP=w.from(r.KECCAK256_RLP_S,"hex"),r.SHA3_RLP=r.KECCAK256_RLP,r.BN=v,r.rlp=y,r.secp256k1=p,r.zeros=function(r){return w.allocUnsafe(r).fill(0)},r.zeroAddress=function(){var e=r.zeros(20);return r.bufferToHex(e)},r.setLengthLeft=r.setLength=function(e,t,n){var f=r.zeros(t);return e=r.toBuffer(e),n?e.length<t?(e.copy(f),f):e.slice(0,t):e.length<t?(e.copy(f,t-e.length),f):e.slice(-t)},r.setLengthRight=function(e,t){return r.setLength(e,t,!0)},r.unpad=r.stripZeros=function(e){for(var t=(e=r.stripHexPrefix(e))[0];e.length>0&&"0"===t.toString();)t=(e=e.slice(1))[0];return e},r.toBuffer=function(e){if(!w.isBuffer(e))if(Array.isArray(e))e=w.from(e);else if("string"==typeof e)e=r.isHexString(e)?w.from(r.padToEven(r.stripHexPrefix(e)),"hex"):w.from(e);else if("number"==typeof e)e=r.intToBuffer(e);else if(null==e)e=w.allocUnsafe(0);else if(v.isBN(e))e=e.toArrayLike(w);else{if(!e.toArray)throw new Error("invalid type");e=w.from(e.toArray())}return e},r.bufferToInt=function(e){return new v(r.toBuffer(e)).toNumber()},r.bufferToHex=function(e){return"0x"+(e=r.toBuffer(e)).toString("hex")},r.fromSigned=function(r){return new v(r).fromTwos(256)},r.toUnsigned=function(r){return w.from(r.toTwos(256).toArray())},r.keccak=function(e,t){switch(e=r.toBuffer(e),t||(t=256),t){case 224:return c(e);case 256:return d(e);case 384:return l(e);case 512:return h(e);default:throw new Error("Invald algorithm: keccak"+t)}},r.keccak256=function(e){return r.keccak(e)},r.sha3=r.keccak,r.sha256=function(e){return e=r.toBuffer(e),m("sha256").update(e).digest()},r.ripemd160=function(e,t){e=r.toBuffer(e);var n=m("rmd160").update(e).digest();return!0===t?r.setLength(n,32):n},r.rlphash=function(e){return r.keccak(y.encode(e))},r.isValidPrivate=function(r){return p.privateKeyVerify(r)},r.isValidPublic=function(r,e){return 64===r.length?p.publicKeyVerify(w.concat([w.from([4]),r])):!!e&&p.publicKeyVerify(r)},r.pubToAddress=r.publicToAddress=function(e,t){return e=r.toBuffer(e),t&&64!==e.length&&(e=p.publicKeyConvert(e,!1).slice(1)),g(64===e.length),r.keccak(e).slice(-20)};var b=r.privateToPublic=function(e){return e=r.toBuffer(e),p.publicKeyCreate(e,!1).slice(1)};r.importPublic=function(e){return 64!==(e=r.toBuffer(e)).length&&(e=p.publicKeyConvert(e,!1).slice(1)),e},r.ecsign=function(r,e){var t=p.sign(r,e),n={};return n.r=t.signature.slice(0,32),n.s=t.signature.slice(32,64),n.v=t.recovery+27,n},r.hashPersonalMessage=function(e){var t=r.toBuffer("Ethereum Signed Message:\n"+e.length.toString());return r.keccak(w.concat([t,e]))},r.ecrecover=function(e,t,n,f){var i=w.concat([r.setLength(n,32),r.setLength(f,32)],64),o=t-27;if(0!==o&&1!==o)throw new Error("Invalid signature v value");var u=p.recover(e,i,o);return p.publicKeyConvert(u,!1).slice(1)},r.toRpcSig=function(e,t,n){if(27!==e&&28!==e)throw new Error("Invalid recovery id");return r.bufferToHex(w.concat([r.setLengthLeft(t,32),r.setLengthLeft(n,32),r.toBuffer(e-27)]))},r.fromRpcSig=function(e){if(65!==(e=r.toBuffer(e)).length)throw new Error("Invalid signature length");var t=e[64];return t<27&&(t+=27),{v:t,r:e.slice(0,32),s:e.slice(32,64)}},r.privateToAddress=function(e){return r.publicToAddress(b(e))},r.isValidAddress=function(r){return/^0x[0-9a-fA-F]{40}$/.test(r)},r.isZeroAddress=function(e){return r.zeroAddress()===r.addHexPrefix(e)},r.toChecksumAddress=function(e){e=r.stripHexPrefix(e).toLowerCase();for(var t=r.keccak(e).toString("hex"),n="0x",f=0;f<e.length;f++)parseInt(t[f],16)>=8?n+=e[f].toUpperCase():n+=e[f];return n},r.isValidChecksumAddress=function(e){return r.isValidAddress(e)&&r.toChecksumAddress(e)===e},r.generateAddress=function(e,t){return e=r.toBuffer(e),t=(t=new v(t)).isZero()?null:w.from(t.toArray()),r.rlphash([e,t]).slice(-20)},r.isPrecompiled=function(e){var t=r.unpad(e);return 1===t.length&&t[0]>=1&&t[0]<=8},r.addHexPrefix=function(e){return"string"!=typeof e||r.isHexPrefixed(e)?e:"0x"+e},r.isValidSignature=function(r,e,t,n){var f=new v("7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0",16),i=new v("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",16);return 32===e.length&&32===t.length&&((27===r||28===r)&&(e=new v(e),t=new v(t),!(e.isZero()||e.gt(i)||t.isZero()||t.gt(i))&&(!1!==n||1!==new v(t).cmp(f))))},r.baToJSON=function(e){if(w.isBuffer(e))return"0x"+e.toString("hex");if(e instanceof Array){for(var t=[],n=0;n<e.length;n++)t.push(r.baToJSON(e[n]));return t}},r.defineProperties=function(e,t,n){if(e.raw=[],e._fields=[],e.toJSON=function(t){if(t){var n={};return e._fields.forEach((function(r){n[r]="0x"+e[r].toString("hex")})),n}return r.baToJSON(this.raw)},e.serialize=function(){return y.encode(e.raw)},t.forEach((function(t,n){function f(){return e.raw[n]}function i(f){"00"!==(f=r.toBuffer(f)).toString("hex")||t.allowZero||(f=w.allocUnsafe(0)),t.allowLess&&t.length?(f=r.stripZeros(f),g(t.length>=f.length,"The field "+t.name+" must not have more "+t.length+" bytes")):t.allowZero&&0===f.length||!t.length||g(t.length===f.length,"The field "+t.name+" must have byte length of "+t.length),e.raw[n]=f}e._fields.push(t.name),Object.defineProperty(e,t.name,{enumerable:!0,configurable:!0,get:f,set:i}),t.default&&(e[t.name]=t.default),t.alias&&Object.defineProperty(e,t.alias,{enumerable:!1,configurable:!0,set:i,get:f})})),n)if("string"==typeof n&&(n=w.from(r.stripHexPrefix(n),"hex")),w.isBuffer(n)&&(n=y.decode(n)),Array.isArray(n)){if(n.length>e._fields.length)throw new Error("wrong number of fields in data");n.forEach((function(t,n){e[e._fields[n]]=r.toBuffer(t)}))}else{if("object"!==(void 0===n?"undefined":o(n)))throw new Error("invalid data");var f=Object.keys(n);t.forEach((function(r){-1!==f.indexOf(r.name)&&(e[r.name]=n[r.name]),-1!==f.indexOf(r.alias)&&(e[r.alias]=n[r.alias])}))}}}(c);var E={},K={},k={};Object.defineProperty(k,"__esModule",{value:!0});var L=i.exports,S=new(0,u.ec)("secp256k1"),_=S.curve;k.privateKeyExport=function(r,e){void 0===e&&(e=!0);var t=new L(r);if(t.ucmp(_.n)>=0)throw new Error("couldn't export to DER format");var n=S.g.mul(t);return U(n.getX(),n.getY(),e)},k.privateKeyModInverse=function(r){var e=new L(r);if(e.ucmp(_.n)>=0||e.isZero())throw new Error("private key range is invalid");return e.invm(_.n).toArrayLike(Buffer,"be",32)},k.signatureImport=function(r){var e=new L(r.r);e.ucmp(_.n)>=0&&(e=new L(0));var t=new L(r.s);return t.ucmp(_.n)>=0&&(t=new L(0)),Buffer.concat([e.toArrayLike(Buffer,"be",32),t.toArrayLike(Buffer,"be",32)])},k.ecdhUnsafe=function(r,e,t){void 0===t&&(t=!0);var n=S.keyFromPublic(r),f=new L(e);if(f.ucmp(_.n)>=0||f.isZero())throw new Error("scalar was invalid (zero or overflow)");var i=n.pub.mul(f);return U(i.getX(),i.getY(),t)};var U=function(r,e,t){var n;return t?((n=Buffer.alloc(33))[0]=e.isOdd()?3:2,r.toArrayLike(Buffer,"be",32).copy(n,1)):((n=Buffer.alloc(65))[0]=4,r.toArrayLike(Buffer,"be",32).copy(n,1),e.toArrayLike(Buffer,"be",32).copy(n,33)),n},C={};Object.defineProperty(C,"__esModule",{value:!0});var P=Buffer.from([48,129,211,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,133,48,129,130,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,33,2,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,36,3,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),T=Buffer.from([48,130,1,19,2,1,1,4,32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,160,129,165,48,129,162,2,1,1,48,44,6,7,42,134,72,206,61,1,1,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,255,255,252,47,48,6,4,1,0,4,1,7,4,65,4,121,190,102,126,249,220,187,172,85,160,98,149,206,135,11,7,2,155,252,219,45,206,40,217,89,242,129,91,22,248,23,152,72,58,218,119,38,163,196,101,93,164,251,252,14,17,8,168,253,23,180,72,166,133,84,25,156,71,208,143,251,16,212,184,2,33,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,186,174,220,230,175,72,160,59,191,210,94,140,208,54,65,65,2,1,1,161,68,3,66,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);C.privateKeyExport=function(r,e,t){void 0===t&&(t=!0);var n=Buffer.from(t?P:T);return r.copy(n,t?8:9),e.copy(n,t?181:214),n},C.privateKeyImport=function(r){var e=r.length,t=0;if(e<t+1||48!==r[t])return null;if(e<(t+=1)+1||!(128&r[t]))return null;var n=127&r[t];if(n<1||n>2)return null;if(e<(t+=1)+n)return null;var f=r[t+n-1]|(n>1?r[t+n-2]<<8:0);return e<(t+=n)+f||e<t+3||2!==r[t]||1!==r[t+1]||1!==r[t+2]||e<(t+=3)+2||4!==r[t]||r[t+1]>32||e<t+2+r[t+1]?null:r.slice(t+2,t+2+r[t+1])},C.signatureImportLax=function(r){var e=Buffer.alloc(32,0),t=Buffer.alloc(32,0),n=r.length,f=0;if(48!==r[f++])return null;var i=r[f++];if(128&i&&(f+=i-128)>n)return null;if(2!==r[f++])return null;var o=r[f++];if(128&o){if(f+(i=o-128)>n)return null;for(;i>0&&0===r[f];f+=1,i-=1);for(o=0;i>0;f+=1,i-=1)o=(o<<8)+r[f]}if(o>n-f)return null;var u=f;if(f+=o,2!==r[f++])return null;var a=r[f++];if(128&a){if(f+(i=a-128)>n)return null;for(;i>0&&0===r[f];f+=1,i-=1);for(a=0;i>0;f+=1,i-=1)a=(a<<8)+r[f]}if(a>n-f)return null;var s=f;for(f+=a;o>0&&0===r[u];o-=1,u+=1);if(o>32)return null;var c=r.slice(u,u+o);for(c.copy(e,32-c.length);a>0&&0===r[s];a-=1,s+=1);if(a>32)return null;var l=r.slice(s,s+a);return l.copy(t,32-l.length),{r:e,s:t}},function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ecdhUnsafe=e.ecdh=e.recover=e.verify=e.sign=e.signatureImportLax=e.signatureImport=e.signatureExport=e.signatureNormalize=e.publicKeyCombine=e.publicKeyTweakMul=e.publicKeyTweakAdd=e.publicKeyVerify=e.publicKeyConvert=e.publicKeyCreate=e.privateKeyTweakMul=e.privateKeyTweakAdd=e.privateKeyModInverse=e.privateKeyNegate=e.privateKeyImport=e.privateKeyExport=e.privateKeyVerify=void 0;var t=r,n=k,f=C;e.privateKeyVerify=function(r){return 32===r.length&&t.privateKeyVerify(Uint8Array.from(r))},e.privateKeyExport=function(r,e){if(32!==r.length)throw new RangeError("private key length is invalid");var t=n.privateKeyExport(r,e);return f.privateKeyExport(r,t,e)},e.privateKeyImport=function(r){if(null!==(r=f.privateKeyImport(r))&&32===r.length&&e.privateKeyVerify(r))return r;throw new Error("couldn't import from DER format")},e.privateKeyNegate=function(r){return Buffer.from(t.privateKeyNegate(Uint8Array.from(r)))},e.privateKeyModInverse=function(r){if(32!==r.length)throw new Error("private key length is invalid");return Buffer.from(n.privateKeyModInverse(Uint8Array.from(r)))},e.privateKeyTweakAdd=function(r,e){return Buffer.from(t.privateKeyTweakAdd(Uint8Array.from(r),e))},e.privateKeyTweakMul=function(r,e){return Buffer.from(t.privateKeyTweakMul(Uint8Array.from(r),Uint8Array.from(e)))},e.publicKeyCreate=function(r,e){return Buffer.from(t.publicKeyCreate(Uint8Array.from(r),e))},e.publicKeyConvert=function(r,e){return Buffer.from(t.publicKeyConvert(Uint8Array.from(r),e))},e.publicKeyVerify=function(r){return(33===r.length||65===r.length)&&t.publicKeyVerify(Uint8Array.from(r))},e.publicKeyTweakAdd=function(r,e,n){return Buffer.from(t.publicKeyTweakAdd(Uint8Array.from(r),Uint8Array.from(e),n))},e.publicKeyTweakMul=function(r,e,n){return Buffer.from(t.publicKeyTweakMul(Uint8Array.from(r),Uint8Array.from(e),n))},e.publicKeyCombine=function(r,e){var n=[];return r.forEach((function(r){n.push(Uint8Array.from(r))})),Buffer.from(t.publicKeyCombine(n,e))},e.signatureNormalize=function(r){return Buffer.from(t.signatureNormalize(Uint8Array.from(r)))},e.signatureExport=function(r){return Buffer.from(t.signatureExport(Uint8Array.from(r)))},e.signatureImport=function(r){return Buffer.from(t.signatureImport(Uint8Array.from(r)))},e.signatureImportLax=function(r){if(0===r.length)throw new RangeError("signature length is invalid");var e=f.signatureImportLax(r);if(null===e)throw new Error("couldn't parse DER signature");return n.signatureImport(e)},e.sign=function(r,e,n){if(null===n)throw new TypeError("options should be an Object");var f=void 0;if(n){if(f={},null===n.data)throw new TypeError("options.data should be a Buffer");if(n.data){if(32!=n.data.length)throw new RangeError("options.data length is invalid");f.data=new Uint8Array(n.data)}if(null===n.noncefn)throw new TypeError("options.noncefn should be a Function");n.noncefn&&(f.noncefn=function(r,e,t,f,i){var o=null!=t?Buffer.from(t):null,u=null!=f?Buffer.from(f):null,a=Buffer.from("");return n.noncefn&&(a=n.noncefn(Buffer.from(r),Buffer.from(e),o,u,i)),new Uint8Array(a)})}var i=t.ecdsaSign(Uint8Array.from(r),Uint8Array.from(e),f);return{signature:Buffer.from(i.signature),recovery:i.recid}},e.verify=function(r,e,n){return t.ecdsaVerify(Uint8Array.from(e),Uint8Array.from(r),n)},e.recover=function(r,e,n,f){return Buffer.from(t.ecdsaRecover(Uint8Array.from(e),n,Uint8Array.from(r),f))},e.ecdh=function(r,e){return Buffer.from(t.ecdh(Uint8Array.from(r),Uint8Array.from(e),{}))},e.ecdhUnsafe=function(r,e,t){if(33!==r.length&&65!==r.length)throw new RangeError("public key length is invalid");if(32!==e.length)throw new RangeError("private key length is invalid");return Buffer.from(n.ecdhUnsafe(Uint8Array.from(r),Uint8Array.from(e),t))}}(K);var R={};!function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.KECCAK256_RLP=r.KECCAK256_RLP_S=r.KECCAK256_RLP_ARRAY=r.KECCAK256_RLP_ARRAY_S=r.KECCAK256_NULL=r.KECCAK256_NULL_S=r.TWO_POW256=r.MAX_INTEGER=void 0;var e=i.exports;r.MAX_INTEGER=new e("ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff",16),r.TWO_POW256=new e("10000000000000000000000000000000000000000000000000000000000000000",16),r.KECCAK256_NULL_S="c5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470",r.KECCAK256_NULL=Buffer.from(r.KECCAK256_NULL_S,"hex"),r.KECCAK256_RLP_ARRAY_S="1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",r.KECCAK256_RLP_ARRAY=Buffer.from(r.KECCAK256_RLP_ARRAY_S,"hex"),r.KECCAK256_RLP_S="56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421",r.KECCAK256_RLP=Buffer.from(r.KECCAK256_RLP_S,"hex")}(R);var I={},N={};!function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.baToJSON=r.addHexPrefix=r.toUnsigned=r.fromSigned=r.bufferToHex=r.bufferToInt=r.toBuffer=r.stripZeros=r.unpad=r.setLengthRight=r.setLength=r.setLengthLeft=r.zeros=void 0;var t=e,n=i.exports;r.zeros=function(r){return Buffer.allocUnsafe(r).fill(0)},r.setLengthLeft=function(e,t,n){void 0===n&&(n=!1);var f=r.zeros(t);return e=r.toBuffer(e),n?e.length<t?(e.copy(f),f):e.slice(0,t):e.length<t?(e.copy(f,t-e.length),f):e.slice(-t)},r.setLength=r.setLengthLeft,r.setLengthRight=function(e,t){return r.setLength(e,t,!0)},r.unpad=function(r){for(var e=(r=t.stripHexPrefix(r))[0];r.length>0&&"0"===e.toString();)e=(r=r.slice(1))[0];return r},r.stripZeros=r.unpad,r.toBuffer=function(r){if(!Buffer.isBuffer(r))if(Array.isArray(r))r=Buffer.from(r);else if("string"==typeof r){if(!t.isHexString(r))throw new Error("Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: "+r);r=Buffer.from(t.padToEven(t.stripHexPrefix(r)),"hex")}else if("number"==typeof r)r=t.intToBuffer(r);else if(null==r)r=Buffer.allocUnsafe(0);else if(n.isBN(r))r=r.toArrayLike(Buffer);else{if(!r.toArray)throw new Error("invalid type");r=Buffer.from(r.toArray())}return r},r.bufferToInt=function(e){return new n(r.toBuffer(e)).toNumber()},r.bufferToHex=function(e){return"0x"+(e=r.toBuffer(e)).toString("hex")},r.fromSigned=function(r){return new n(r).fromTwos(256)},r.toUnsigned=function(r){return Buffer.from(r.toTwos(256).toArray())},r.addHexPrefix=function(r){return"string"!=typeof r||t.isHexPrefixed(r)?r:"0x"+r},r.baToJSON=function(e){if(Buffer.isBuffer(e))return"0x"+e.toString("hex");if(e instanceof Array){for(var t=[],n=0;n<e.length;n++)t.push(r.baToJSON(e[n]));return t}}}(N);var H={};!function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.rlphash=r.ripemd160=r.sha256=r.keccak256=r.keccak=void 0;var n=t,i=n.keccak224,o=n.keccak384,u=n.keccak256,a=n.keccak512,c=s,l=e,d=f,h=N;r.keccak=function(r,e){switch(void 0===e&&(e=256),r="string"!=typeof r||l.isHexString(r)?h.toBuffer(r):Buffer.from(r,"utf8"),e||(e=256),e){case 224:return i(r);case 256:return u(r);case 384:return o(r);case 512:return a(r);default:throw new Error("Invald algorithm: keccak"+e)}},r.keccak256=function(e){return r.keccak(e)},r.sha256=function(r){return r=h.toBuffer(r),c("sha256").update(r).digest()},r.ripemd160=function(r,e){r=h.toBuffer(r);var t=c("rmd160").update(r).digest();return!0===e?h.setLength(t,32):t},r.rlphash=function(e){return r.keccak(d.encode(e))}}(H),function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.importPublic=r.privateToPublic=r.privateToAddress=r.publicToAddress=r.pubToAddress=r.isValidPublic=r.isValidPrivate=r.isPrecompiled=r.generateAddress2=r.generateAddress=r.isValidChecksumAddress=r.toChecksumAddress=r.isZeroAddress=r.isValidAddress=r.zeroAddress=void 0;var t=n.exports,f=e,o=K,u=i.exports,a=N,s=H;r.zeroAddress=function(){var r=a.zeros(20);return a.bufferToHex(r)},r.isValidAddress=function(r){return/^0x[0-9a-fA-F]{40}$/.test(r)},r.isZeroAddress=function(e){return r.zeroAddress()===a.addHexPrefix(e)},r.toChecksumAddress=function(r,e){r=f.stripHexPrefix(r).toLowerCase();for(var t=void 0!==e?e.toString()+"0x":"",n=s.keccak(t+r).toString("hex"),i="0x",o=0;o<r.length;o++)parseInt(n[o],16)>=8?i+=r[o].toUpperCase():i+=r[o];return i},r.isValidChecksumAddress=function(e,t){return r.isValidAddress(e)&&r.toChecksumAddress(e,t)===e},r.generateAddress=function(r,e){r=a.toBuffer(r);var t=new u(e);return t.isZero()?s.rlphash([r,null]).slice(-20):s.rlphash([r,Buffer.from(t.toArray())]).slice(-20)},r.generateAddress2=function(r,e,n){var f=a.toBuffer(r),i=a.toBuffer(e),o=a.toBuffer(n);return t(20===f.length),t(32===i.length),s.keccak256(Buffer.concat([Buffer.from("ff","hex"),f,i,s.keccak256(o)])).slice(-20)},r.isPrecompiled=function(r){var e=a.unpad(r);return 1===e.length&&e[0]>=1&&e[0]<=8},r.isValidPrivate=function(r){return o.privateKeyVerify(r)},r.isValidPublic=function(r,e){return void 0===e&&(e=!1),64===r.length?o.publicKeyVerify(Buffer.concat([Buffer.from([4]),r])):!!e&&o.publicKeyVerify(r)},r.pubToAddress=function(r,e){return void 0===e&&(e=!1),r=a.toBuffer(r),e&&64!==r.length&&(r=o.publicKeyConvert(r,!1).slice(1)),t(64===r.length),s.keccak(r).slice(-20)},r.publicToAddress=r.pubToAddress,r.privateToAddress=function(e){return r.publicToAddress(r.privateToPublic(e))},r.privateToPublic=function(r){return r=a.toBuffer(r),o.publicKeyCreate(r,!1).slice(1)},r.importPublic=function(r){return 64!==(r=a.toBuffer(r)).length&&(r=o.publicKeyConvert(r,!1).slice(1)),r}}(I);var O={};Object.defineProperty(O,"__esModule",{value:!0}),O.hashPersonalMessage=O.isValidSignature=O.fromRpcSig=O.toRpcSig=O.ecrecover=O.ecsign=void 0;var z=K,V=i.exports,M=N,W=H;function j(r,e){return e?r-(2*e+35):r-27}function Z(r){return 0===r||1===r}O.ecsign=function(r,e,t){var n=z.sign(r,e),f=n.recovery;return{r:n.signature.slice(0,32),s:n.signature.slice(32,64),v:t?f+(2*t+35):f+27}},O.ecrecover=function(r,e,t,n,f){var i=Buffer.concat([M.setLength(t,32),M.setLength(n,32)],64),o=j(e,f);if(!Z(o))throw new Error("Invalid signature v value");var u=z.recover(r,i,o);return z.publicKeyConvert(u,!1).slice(1)},O.toRpcSig=function(r,e,t,n){if(!Z(j(r,n)))throw new Error("Invalid signature v value");return M.bufferToHex(Buffer.concat([M.setLengthLeft(e,32),M.setLengthLeft(t,32),M.toBuffer(r)]))},O.fromRpcSig=function(r){var e=M.toBuffer(r);if(65!==e.length)throw new Error("Invalid signature length");var t=e[64];return t<27&&(t+=27),{v:t,r:e.slice(0,32),s:e.slice(32,64)}},O.isValidSignature=function(r,e,t,n,f){void 0===n&&(n=!0);var i=new V("7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0",16),o=new V("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141",16);if(32!==e.length||32!==t.length)return!1;if(!Z(j(r,f)))return!1;var u=new V(e),a=new V(t);return!(u.isZero()||u.gt(o)||a.isZero()||a.gt(o))&&(!n||1!==a.cmp(i))},O.hashPersonalMessage=function(r){var e=Buffer.from("Ethereum Signed Message:\n"+r.length.toString(),"utf-8");return W.keccak(Buffer.concat([e,r]))};var D={};Object.defineProperty(D,"__esModule",{value:!0}),D.defineProperties=void 0;var Y=n.exports,J=e,$=f,X=N;D.defineProperties=function(r,e,t){if(r.raw=[],r._fields=[],r.toJSON=function(e){if(void 0===e&&(e=!1),e){var t={};return r._fields.forEach((function(e){t[e]="0x"+r[e].toString("hex")})),t}return X.baToJSON(r.raw)},r.serialize=function(){return $.encode(r.raw)},e.forEach((function(e,t){function n(){return r.raw[t]}function f(n){"00"!==(n=X.toBuffer(n)).toString("hex")||e.allowZero||(n=Buffer.allocUnsafe(0)),e.allowLess&&e.length?(n=X.stripZeros(n),Y(e.length>=n.length,"The field "+e.name+" must not have more "+e.length+" bytes")):e.allowZero&&0===n.length||!e.length||Y(e.length===n.length,"The field "+e.name+" must have byte length of "+e.length),r.raw[t]=n}r._fields.push(e.name),Object.defineProperty(r,e.name,{enumerable:!0,configurable:!0,get:n,set:f}),e.default&&(r[e.name]=e.default),e.alias&&Object.defineProperty(r,e.alias,{enumerable:!1,configurable:!0,set:f,get:n})})),t)if("string"==typeof t&&(t=Buffer.from(J.stripHexPrefix(t),"hex")),Buffer.isBuffer(t)&&(t=$.decode(t)),Array.isArray(t)){if(t.length>r._fields.length)throw new Error("wrong number of fields in data");t.forEach((function(e,t){r[r._fields[t]]=X.toBuffer(e)}))}else{if("object"!=typeof t)throw new Error("invalid data");var n=Object.keys(t);e.forEach((function(e){-1!==n.indexOf(e.name)&&(r[e.name]=t[e.name]),-1!==n.indexOf(e.alias)&&(r[e.alias]=t[e.alias])}))}},function(r){var t=o&&o.__createBinding||(Object.create?function(r,e,t,n){void 0===n&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){void 0===n&&(n=t),r[n]=e[t]}),n=o&&o.__exportStar||function(r,e){for(var n in r)"default"===n||e.hasOwnProperty(n)||t(e,r,n)};Object.defineProperty(r,"__esModule",{value:!0}),r.secp256k1=r.rlp=r.BN=void 0;var u=K;r.secp256k1=u;var a=e,s=i.exports;r.BN=s;var c=f;r.rlp=c,Object.assign(r,a),n(R,r),n(I,r),n(H,r),n(O,r),n(N,r),n(D,r)}(E);const F=E,G=i.exports;var q=function(){};function Q(r){return r.startsWith("int[")?"int256"+r.slice(3):"int"===r?"int256":r.startsWith("uint[")?"uint256"+r.slice(4):"uint"===r?"uint256":r.startsWith("fixed[")?"fixed128x128"+r.slice(5):"fixed"===r?"fixed128x128":r.startsWith("ufixed[")?"ufixed128x128"+r.slice(6):"ufixed"===r?"ufixed128x128":r}function rr(r){return parseInt(/^\D+(\d+)$/.exec(r)[1],10)}function er(r){var e=/^\D+(\d+)x(\d+)$/.exec(r);return[parseInt(e[1],10),parseInt(e[2],10)]}function tr(r){var e=r.match(/(.*)\[(.*?)\]$/);return e?""===e[2]?"dynamic":parseInt(e[2],10):null}function nr(r){var e=typeof r;if("string"===e)return F.isHexPrefixed(r)?new G(F.stripHexPrefix(r),16):new G(r,10);if("number"===e)return new G(r);if(r.toArray)return r;throw new Error("Argument is not a number")}function fr(r){var e=/^(\w+)\((.*)\)$/.exec(r);if(3!==e.length)throw new Error("Invalid method signature");var t=/^(.+)\):\((.+)$/.exec(e[2]);if(null!==t&&3===t.length)return{method:e[1],args:t[1].split(","),retargs:t[2].split(",")};var n=e[2].split(",");return 1===n.length&&""===n[0]&&(n=[]),{method:e[1],args:n}}function ir(r,e){var t,n,f,i;if("address"===r)return ir("uint160",nr(e));if("bool"===r)return ir("uint8",e?1:0);if("string"===r)return ir("bytes",Buffer.from(e,"utf8"));if(sr(r)){if(void 0===e.length)throw new Error("Not an array?");if("dynamic"!==(t=tr(r))&&0!==t&&e.length>t)throw new Error("Elements exceed array size: "+t);for(i in f=[],r=r.slice(0,r.lastIndexOf("[")),"string"==typeof e&&(e=JSON.parse(e)),e)f.push(ir(r,e[i]));if("dynamic"===t){var o=ir("uint256",e.length);f.unshift(o)}return Buffer.concat(f)}if("bytes"===r)return e=Buffer.from(e),f=Buffer.concat([ir("uint256",e.length),e]),e.length%32!=0&&(f=Buffer.concat([f,F.zeros(32-e.length%32)])),f;if(r.startsWith("bytes")){if((t=rr(r))<1||t>32)throw new Error("Invalid bytes<N> width: "+t);return F.setLengthRight(e,32)}if(r.startsWith("uint")){if((t=rr(r))%8||t<8||t>256)throw new Error("Invalid uint<N> width: "+t);if((n=nr(e)).bitLength()>t)throw new Error("Supplied uint exceeds width: "+t+" vs "+n.bitLength());if(n<0)throw new Error("Supplied uint is negative");return n.toArrayLike(Buffer,"be",32)}if(r.startsWith("int")){if((t=rr(r))%8||t<8||t>256)throw new Error("Invalid int<N> width: "+t);if((n=nr(e)).bitLength()>t)throw new Error("Supplied int exceeds width: "+t+" vs "+n.bitLength());return n.toTwos(256).toArrayLike(Buffer,"be",32)}if(r.startsWith("ufixed")){if(t=er(r),(n=nr(e))<0)throw new Error("Supplied ufixed is negative");return ir("uint256",n.mul(new G(2).pow(new G(t[1]))))}if(r.startsWith("fixed"))return t=er(r),ir("int256",nr(e).mul(new G(2).pow(new G(t[1]))));throw new Error("Unsupported or invalid type: "+r)}function or(r,e,t){var n,f,i,o;if("string"==typeof r&&(r=ur(r)),"address"===r.name)return or(r.rawType,e,t).toArrayLike(Buffer,"be",20).toString("hex");if("bool"===r.name)return or(r.rawType,e,t).toString()===new G(1).toString();if("string"===r.name){var u=or(r.rawType,e,t);return Buffer.from(u,"utf8").toString()}if(r.isArray){for(i=[],n=r.size,"dynamic"===r.size&&(t=or("uint256",e,t).toNumber(),n=or("uint256",e,t).toNumber(),t+=32),o=0;o<n;o++){var a=or(r.subArray,e,t);i.push(a),t+=r.subArray.memoryUsage}return i}if("bytes"===r.name)return t=or("uint256",e,t).toNumber(),n=or("uint256",e,t).toNumber(),e.slice(t+32,t+32+n);if(r.name.startsWith("bytes"))return e.slice(t,t+r.size);if(r.name.startsWith("uint")){if((f=new G(e.slice(t,t+32),16,"be")).bitLength()>r.size)throw new Error("Decoded int exceeds width: "+r.size+" vs "+f.bitLength());return f}if(r.name.startsWith("int")){if((f=new G(e.slice(t,t+32),16,"be").fromTwos(256)).bitLength()>r.size)throw new Error("Decoded uint exceeds width: "+r.size+" vs "+f.bitLength());return f}if(r.name.startsWith("ufixed")){if(n=new G(2).pow(new G(r.size[1])),!(f=or("uint256",e,t)).mod(n).isZero())throw new Error("Decimals not supported yet");return f.div(n)}if(r.name.startsWith("fixed")){if(n=new G(2).pow(new G(r.size[1])),!(f=or("int256",e,t)).mod(n).isZero())throw new Error("Decimals not supported yet");return f.div(n)}throw new Error("Unsupported or invalid type: "+r.name)}function ur(r){var e,t,n;if(sr(r)){e=tr(r);var f=r.slice(0,r.lastIndexOf("["));return f=ur(f),t={isArray:!0,name:r,size:e,memoryUsage:"dynamic"===e?32:f.memoryUsage*e,subArray:f}}switch(r){case"address":n="uint160";break;case"bool":n="uint8";break;case"string":n="bytes"}if(t={rawType:n,name:r,memoryUsage:32},r.startsWith("bytes")&&"bytes"!==r||r.startsWith("uint")||r.startsWith("int")?t.size=rr(r):(r.startsWith("ufixed")||r.startsWith("fixed"))&&(t.size=er(r)),r.startsWith("bytes")&&"bytes"!==r&&(t.size<1||t.size>32))throw new Error("Invalid bytes<N> width: "+t.size);if((r.startsWith("uint")||r.startsWith("int"))&&(t.size%8||t.size<8||t.size>256))throw new Error("Invalid int/uint<N> width: "+t.size);return t}function ar(r){return"string"===r||"bytes"===r||"dynamic"===tr(r)}function sr(r){return r.lastIndexOf("]")===r.length-1}function cr(r,e){return r.startsWith("address")||r.startsWith("bytes")?"0x"+e.toString("hex"):e.toString()}q.eventID=function(r,e){var t=r+"("+e.map(Q).join(",")+")";return F.keccak256(Buffer.from(t))},q.methodID=function(r,e){return q.eventID(r,e).slice(0,4)},q.rawEncode=function(r,e){var t=[],n=[],f=0;r.forEach((function(r){if(sr(r)){var e=tr(r);f+="dynamic"!==e?32*e:32}else f+=32}));for(var i=0;i<r.length;i++){var o=Q(r[i]),u=ir(o,e[i]);ar(o)?(t.push(ir("uint256",f)),n.push(u),f+=u.length):t.push(u)}return Buffer.concat(t.concat(n))},q.rawDecode=function(r,e){var t=[];e=Buffer.from(e);for(var n=0,f=0;f<r.length;f++){var i=ur(Q(r[f])),o=or(i,e,n);n+=i.memoryUsage,t.push(o)}return t},q.simpleEncode=function(r){var e=Array.prototype.slice.call(arguments).slice(1),t=fr(r);if(e.length!==t.args.length)throw new Error("Argument count mismatch");return Buffer.concat([q.methodID(t.method,t.args),q.rawEncode(t.args,e)])},q.simpleDecode=function(r,e){var t=fr(r);if(!t.retargs)throw new Error("No return values in method");return q.rawDecode(t.retargs,e)},q.stringify=function(r,e){var t=[];for(var n in r){var f=r[n],i=e[n];i=/^[^\[]+\[.*\]$/.test(f)?i.map((function(r){return cr(f,r)})).join(", "):cr(f,i),t.push(i)}return t},q.solidityHexValue=function(r,e,t){var n,f;if(sr(r)){var i=r.replace(/\[.*?\]/,"");if(!sr(i)){var o=tr(r);if("dynamic"!==o&&0!==o&&e.length>o)throw new Error("Elements exceed array size: "+o)}var u=e.map((function(r){return q.solidityHexValue(i,r,256)}));return Buffer.concat(u)}if("bytes"===r)return e;if("string"===r)return Buffer.from(e,"utf8");if("bool"===r){t=t||8;var a=Array(t/4).join("0");return Buffer.from(e?a+"1":a+"0","hex")}if("address"===r){var s=20;return t&&(s=t/8),F.setLengthLeft(e,s)}if(r.startsWith("bytes")){if((n=rr(r))<1||n>32)throw new Error("Invalid bytes<N> width: "+n);return F.setLengthRight(e,n)}if(r.startsWith("uint")){if((n=rr(r))%8||n<8||n>256)throw new Error("Invalid uint<N> width: "+n);if((f=nr(e)).bitLength()>n)throw new Error("Supplied uint exceeds width: "+n+" vs "+f.bitLength());return t=t||n,f.toArrayLike(Buffer,"be",t/8)}if(r.startsWith("int")){if((n=rr(r))%8||n<8||n>256)throw new Error("Invalid int<N> width: "+n);if((f=nr(e)).bitLength()>n)throw new Error("Supplied int exceeds width: "+n+" vs "+f.bitLength());return t=t||n,f.toTwos(n).toArrayLike(Buffer,"be",t/8)}throw new Error("Unsupported or invalid type: "+r)},q.solidityPack=function(r,e){if(r.length!==e.length)throw new Error("Number of types are not matching the values");for(var t=[],n=0;n<r.length;n++){var f=Q(r[n]),i=e[n];t.push(q.solidityHexValue(f,i,null))}return Buffer.concat(t)},q.soliditySHA3=function(r,e){return F.keccak256(q.solidityPack(r,e))},q.soliditySHA256=function(r,e){return F.sha256(q.solidityPack(r,e))},q.solidityRIPEMD160=function(r,e){return F.ripemd160(q.solidityPack(r,e),!0)},q.fromSerpent=function(r){for(var e,t=[],n=0;n<r.length;n++){var f=r[n];if("s"===f)t.push("bytes");else if("b"===f){for(var i="bytes",o=n+1;o<r.length&&((e=r[o])>="0"&&e<="9");)i+=r[o]-"0",o++;n=o-1,t.push(i)}else if("i"===f)t.push("int256");else{if("a"!==f)throw new Error("Unsupported or invalid type: "+f);t.push("int256[]")}}return t},q.toSerpent=function(r){for(var e=[],t=0;t<r.length;t++){var n=r[t];if("bytes"===n)e.push("s");else if(n.startsWith("bytes"))e.push("b"+rr(n));else if("int256"===n)e.push("i");else{if("int256[]"!==n)throw new Error("Unsupported or invalid type: "+n);e.push("a")}}return e.join("")};const lr=c,dr=q;var hr={concatSig:function(r,e,t){const n=lr.fromSigned(e),f=lr.fromSigned(t),i=lr.bufferToInt(r),o=vr(lr.toUnsigned(n).toString("hex"),64),u=vr(lr.toUnsigned(f).toString("hex"),64),a=lr.stripHexPrefix(lr.intToHex(i));return lr.addHexPrefix(o.concat(u,a)).toString("hex")},normalize:function(r){if(r){if("number"==typeof r){const e=lr.toBuffer(r);r=lr.bufferToHex(e)}if("string"!=typeof r){var e="eth-sig-util.normalize() requires hex string or integer input.";throw new Error(e+=" received "+typeof r+": "+r)}return lr.addHexPrefix(r.toLowerCase())}},personalSign:function(r,e){var t=lr.toBuffer(e.data),n=lr.hashPersonalMessage(t),f=lr.ecsign(n,r);return lr.bufferToHex(this.concatSig(f.v,f.r,f.s))},recoverPersonalSignature:function(r){const e=yr(r),t=lr.publicToAddress(e);return lr.bufferToHex(t)},extractPublicKey:function(r){return"0x"+yr(r).toString("hex")},typedSignatureHash:function(r){const e=pr(r);return lr.bufferToHex(e)},signTypedData:function(r,e){const t=pr(e.data),n=lr.ecsign(t,r);return lr.bufferToHex(this.concatSig(n.v,n.r,n.s))},recoverTypedSignature:function(r){const e=gr(pr(r.data),r.sig),t=lr.publicToAddress(e);return lr.bufferToHex(t)}};function pr(r){const e=new Error("Expect argument to be non-empty array");if("object"!=typeof r||!r.length)throw e;const t=r.map((function(r){return"bytes"===r.type?lr.toBuffer(r.value):r.value})),n=r.map((function(r){return r.type})),f=r.map((function(r){if(!r.name)throw e;return r.type+" "+r.name}));return dr.soliditySHA3(["bytes32","bytes32"],[dr.soliditySHA3(new Array(r.length).fill("string"),f),dr.soliditySHA3(n,t)])}function gr(r,e){const t=lr.toBuffer(e),n=lr.fromRpcSig(t);return lr.ecrecover(r,n.v,n.r,n.s)}function yr(r){const e=lr.toBuffer(r.data);return gr(lr.hashPersonalMessage(e),r.sig)}function vr(r,e){for(var t=""+r;t.length<e;)t="0"+t;return t}export{c as d,hr as e};
